{"version":3,"sources":["modules/balance/balanceActions.js","modules/event/reducers/addressContractEventsByIdReducer.js","modules/event/eventActions.js","utils/localStorageWrapper.js","modules/token/tokenActions.js","modules/token/reducers/ListStateReducer.js","modules/token/reducers/TokensByIdReducer.js","modules/token/reducers/AllIdsReducer.js","modules/token/reducers/volatileTokensByIdReducer.js","modules/token/reducers/TrackedIdsReducer.js","utils/getWeb3.js","utils/promisifyWeb3.js","modules/web3/web3Actions.js","modules/token/reducers/SelectorReducer.js","modules/token/reducers/tokenReducer.js","utils/reducerUtils.js","modules/web3/web3Reducer.js","modules/address/addressActions.js","modules/address/reducers/addressByIdReducer.js","modules/address/reducers/allAddressIdsReducer.js","modules/address/reducers/addressSelectorReducer.js","modules/address/reducers/addressReducer.js","modules/balance/reducer/balanceByIdReducer.js","modules/balance/reducer/allBalancesReducer.js","modules/balance/reducer/positiveBalancesReducer.js","modules/balance/reducer/BalanceListStateReducer.js","modules/balance/reducer/balanceReducer.js","modules/event/reducers/eventByIdReducer.js","modules/event/reducers/allEventIdsReducer.js","modules/event/reducers/listStateReducer.js","modules/event/reducers/eventReducer.js","modules/modal/modalActions.js","modules/modal/modalReducer.js","store.js","modules/modal/TestModal.js","modules/forms/transferForm/TransferForm.js","modules/forms/transferForm/TransferFormContainer.js","modules/modal/ModalRoot.js","modules/token/TokenListFilter.js","modules/token/TokenListFilterContainer.js","modules/screens/ScreenHeader.js","modules/balance/Balance.js","modules/common/AddressDisplay.js","modules/balance/BalanceItemDetail.js","modules/balance/BalanceItemDetailContainer.js","modules/balance/BalanceItem.js","modules/balance/BalanceItemContainer.js","modules/balance/BalancesList.js","modules/segments/OverviewBodyContainer.js","modules/segments/Overview.js","modules/segments/OverviewContainer.js","modules/web3/web3Info.js","modules/web3/web3Container.js","modules/segments/Sidebar.js","modules/address/AddressRow.js","modules/address/AddressContainer.js","modules/address/QueryAddressForm.js","modules/address/QueryAddressFormContainer.js","modules/address/AddressList.js","modules/address/AddressListContainer.js","modules/segments/Accounts.js","modules/token/SelectableToken.js","modules/token/SelectableTokenContainer.js","modules/token/SelectableTokenList.js","modules/token/SelectableTokenListContainer.js","modules/segments/TokenContracts.js","modules/event/EventFilterContainer.js","modules/event/EventLoader.js","modules/event/EventLoaderContainer.js","modules/common/TxHashDisplay.js","modules/event/TransferEvent.js","modules/event/TransferEventContainer.js","modules/event/TransferEventsList.js","modules/event/TransferEventsListContainer.js","modules/segments/Events.js","modules/segments/EventsContainer.js","modules/web3/NetworkWarning.js","modules/web3/NetworkWarningController.js","modules/layout/LayoutContainer.js","modules/common/ModalLoader.js","modules/token/TokenLoaderGate.js","modules/web3/web3Gate.js","modules/web3/web3GateContainer.js","utils/LocalStorageGate.js","App.js","registerServiceWorker.js","index.js"],"names":["BALANCE_STATES","VIRGIN","LOADING","INITIALIZED","SET_BALANCE","SET_BALANCE_STATE","CREATE_BALANCE_ENTRY","createBalanceEntry","balanceId","addressId","tokenId","type","payload","DELETE_BALANCE_ENTRY","deleteBalanceEntry","CHANGE_BALANCE_FILTER_PROPS","setBalanceFilterString","filterString","dispatch","getState","searchString","toLowerCase","balanceIds","balance","allIds","length","filter","balanceEntry","byId","token","tokens","name","includes","symbol","address","matchedBalanceIds","setBalanceByAddressAndToken","buildBalanceId","undefined","setBalance","balanceStateChanged","balanceState","setBalanceState","reloadBalance","loadTokenBalance","ADDRESS_CONTRACT_EVENTS_BY_ID_INITIAL","buildAddressContractEventId","ADD_EVENTS","CHANGE_TRANSFEREVENTLIST_PAGE","CREATE_ACE_ENTRY","createAceEntry","ACE_ENTRIES_LOADING_CHANGE","aceEntriesLoadingChange","addressIds","isLoading","loadingFromBlock","loadingToBlock","loadingCurrentBlock","aceIds","map","ACE_ENTRIES_BLOCK_RANGE_CHANGE","aceEntriesBlockRangeChange","fromBlock","toBlock","SET_ACE_ENTRY_EVENT_IDS","CHANGE_EVENT_SCAN_PROPS","aceEntriesLoadingChangeWrapper","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","forEach","aceId","events","aceById","stop","_x","_x2","apply","this","arguments","addEventsThunk","aceIdsToSort","watchedAddressIds","addresses","transferEvent","_transferEvent$args","args","_from","_to","aceFromId","push","aceToId","addEvents","eventsById","eventIds","slice","sort","eventA","eventB","blockNumber","setAceEntryEventIds","buildEventId","event","transactionHash","logIndex","TRACKED_TOKEN_KEYS","SELECTED_TOKEN_KEY","WATCHED_ADDRESSES","storeLocalData","key","data","localStorage","setItem","JSON","stringify","getLocalData","defaultValue","parse","getItem","e","ETH_TOKEN_MAGIC_ADDRESS","ETH_TOKEN_DUMMY","decimals","TOKEN_LIST_STATES","CHANGE_TOKEN_LIST_STATE","tokenListStateChanged","tokenListState","listState","ADD_TOKEN","addToken","tokenID","ADD_VOLATILE_TOKEN","IS_LOADING_TOKEN","loadingTokenChanged","SET_TOKEN_SUPPLY","IS_LOADING_SUPPLY","SET_TOKEN_CONTRACT_INSTANCE","setTokenContractInstance","contractInstance","SET_TOKEN_LOADING_PROMISE","changeSelectorTokenIdThunk","selectedTokenId","changeSelectorTokenId","selector","CHANGE_SELECTOR_TOKENID","CLEAR_TOKEN_LIST","clearTokenList","CHANGE_VALID_TOKEN_COUNT","CHANGE_FILTER_PROPS","RESET_DISPLAY_COUNT","CHANGE_TOKEN_TRACKING","changeTokenTracking","doTrack","CHANGE_TOKEN_LIST_PAGE","changeTokenListPage","activePage","changeTokenTrackingThunk","trackedIds","values","clearTokenBalances","setFilterProps","filterProps","showOnlyTracked","oldFilterString","oldShowOnlyTracked","filterIsActive","tokenIds","matchedTokenIds","changeFilterProps","mapListToken","listToken","id","Math","pow","description","website","imageUrl","supply","loading","instantiateTokenContract","loadingPromise","Promise","_ref2","_callee2","resolve","reject","web3","ERC20Contract","_context2","web3Instance","contract","abi","erc20ABI","setProvider","currentProvider","at","sent","_x3","_x4","setTokenLoadingPromise","loadMultiTokenBalances","tokenIDs","_ref3","_callee4","_context4","_ref4","_callee3","volatileToken","_context3","eth","getBalancePromise","verifyContractInstance","volatileById","balanceOf","_x7","_x5","_x6","_callee7","_context8","abrupt","LISTSTATE_INITIAL","total","displayCount","TOKENS_BY_ID_INITIAL","ALL_TOKENS_INITIAL","VOLATILE_TOKENS_BY_ID_INITIAL","addTokenId","state","action","objectSpread","defineProperty","TRACKED_TOKENS_INITIAL","getWeb3","window","addEventListener","myWeb3","ethereum","Web3","console","log","error","promisify","syncGetters","db","net","personal","shh","version","keys","group","method","indexOf","value","callbackToResolve","WEB3_STATES","UNINITIALIZED","ERROR","ETH_ENABLE_STATES","REJECTED","WAITING","GRANTED","SET_WEB3_STATE","setWeb3State","SET_ETH_ENABLE_STATE","setEthEnableState","ethEnableState","SET_WEB3INSTANCE","setWeb3Instance","SET_ENS","setENS","ens","SET_CURRENT_BLOCK","setCurrentBlock","block","SET_NETWORK","setNetwork","previousId","SET_NODE_VERSION","setNodeVersion","nodeVersion","SET_BLOCK_FILTER","setBlockFilter","blockFilter","stopBlockFilter","stopWatching","result","getNetworkName","networkId","network","SELECTOR_INITIAL","selctedTokenId","combineReducers","count","changeValidTokenCount","resetDisplayCount","tokenListPageChanged","addTokenEntry","setTokenSupply","loadingSupplyChanged","newEventIds","transferEventId","warn","concat","addTransferEvents","trackedIndex","updateObject","oldObject","newValues","assign","WEB3_INITIAL","number","timestamp","ADDRESS_TYPE_EXTERNAL","ADDRESS_TYPE_OWNED","ADDRESS_BALANCES_STATES","CHANGE_ADDRESS_BALANCES_STATE","ADD_ADDRESS","addAddress","ensName","removeAddressThunk","REMOVE_ADDRESS","removeAddress","clearAddressBalances","addressesToStore","o","CHANGE_ADDRESS_TYPE","changeAddressType","newType","addNewAddress","CHANGE_SELECTOR_ADDRESSID","changeSelectorAddressId","selectedAddressId","ADDRESS_BY_ID_INITIAL","ALL_ADDRESSES_INITIAL","balancesState","addAddressEntry","newState","removeAddressEntry","addressEntry","addressBalancesState","changeAddressBalancesState","addAddressId","entryId","removeAddressId","BALANCE_BY_ID_INITIAL","ALL_BALANCES_INITIAL","POSITIVE_BALANCES_INITIAL","BALANCE_LISTSTATE_INITIAL","BigNumber","index","splice","positiveIds","isZero","entry","greaterThan","changeBalanceFilterProps","EVENT_BY_ID_INITIAL","ALL_EVENTS_INITIAL","currentChunk","maxChunks","addEventIds","acesId","firstBlock","lastBlock","aceEntry","min","max","transferEventListPageChanged","_payload$props","props","changeEventScanProps","resetPager","SHOW_MODAL","HIDE_MODAL","MODAL_INITIAL","modalType","modalProps","reducer","modal","showModal","logger","createLogger","diff","composeEnhancers","compose","TestModal","closeModal","react_default","createElement","Modal","open","onClose","Header","Content","Description","defaultProps","TransferForm","onValidSubmit","fromAddress","tokenName","tokenSymbol","tokenBalance","etherBalance","gasCosts","errorLabel","Label","color","pointing","addValidationRule","isAddress","bnValue","toBigNumber","bnMax","lessThanOrEqualTo","err","size","closeIcon","formsy_semantic_ui_react_lib","noValidate","Segment","Grid","columns","Row","Column","width","List","Item","toFixed","Group","placeholder","required","instantValidation","validations","validationErrors","isEthereumAddress","isDefaultRequiredValue","label","labelPosition","isNumeric","isLessThanOrEqual","readOnly","Button","content","TransferFormContainer","context","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","formData","alert","amount","toAddressValid","amountValid","rateValid","_this$props","transferForm_TransferForm","Component","MODAL_COMPONENTS","TEST_MODAL","TRANSFER_FORM_CONTAINER","connect","ownProps","tokenBalanceId","dividedBy","transferToken","_ref6","_callee6","_context7","_x13","_x14","ModalRoot","SpecificModal","TokenListFilter","handleChange","clearFilter","icon","Icon","circular","link","onClick","Input","onChange","fluid","TokenListFilterContainer","bind","assertThisInitialized","setFilterString","token_TokenListFilter","displayed","target","ScreenHeader","title","as","inverted","textAlign","style","marginTop","Balance","numDecimals","trigger","Popup","dp","AddressDisplay","BalanceItemDetail","url","Table","Cell","react_router_dom","to","common_AddressDisplay","balance_Balance","BalanceItemDetailContainer","balance_BalanceItemDetail","addressType","openTransferModal","BalanceItem","tableBody","expanded","tokenBalances","tokenEventsLinkOptions","toggleCollapse","eventLink","tableHeader","HeaderCell","Statistic","Value","Body","balance_BalanceItemDetailContainer","compact","BalanceItemContainer","_this2","setState","balance_BalanceItem","_","reduce","sum","plus","pathname","BalancesList","entries","balancesByToken","balance_BalanceItemContainer","OverviewBodyContainer","hideEmpty","balance_BalancesList","Message","balanceEntries","groupBy","Overview","body","hasAccounts","_useState","useState","_useState2","slicedToArray","setHideEmpty","segments_OverviewBodyContainer","Fragment","screens_ScreenHeader","verticalAlign","divided","Checkbox","toggle","checked","token_TokenListFilterContainer","Divider","OverviewContainer","segments_Overview","Web3Info","gitHub","srcUrl","href","rel","Web3Container","apiVersion","api","web3Info","Sidebar","Menu","vertical","header","NavLink","AddressRow","iconName","popupContent","removeButton","handleRemove","collapsing","AddressContainer","address_AddressRow","PureComponent","progressTotal","progressCurrent","QueryAddressForm","handleSubmit","disabled","Form","onSubmit","inline","addressStates","ADDRESS_RESOLVING","ADDRESS_VALID","ADDRESS_INVALID","QueryAddressFormContainer","_Component","input","addressState","validAddress","resolvedAddress","test","lookup","t0","_this$state","inherits","createClass","address_QueryAddressForm","AddressList","ownTable","watchTable","ethEnable","waitingGrant","ownAddressIds","basic","selectable","address_AddressContainer","primary","watchAddressIds","dividing","address_QueryAddressFormContainer","AddressListContainer","updateWeb3Accounts","requestEthEnable","checkAccountTimer","address_AddressList","initAccounts","newProps","clearInterval","isMetaMask","setInterval","getAccounts","accounts","changeOwnAddresses","addressesById","newAccounts","account","existingAddress","_ref5","enable","Accounts","address_AddressListContainer","SelectableToken","SelectableTokenContainer","token_SelectableToken","tokenAddress","tokenTracked","tracked","SelectableTokenList","tokenList","celled","token_SelectableTokenContainer","negative","items","SelectableTokenListContainer","handleShowOnlyTrackedChange","handlePaginationChange","handleLoadTokens","setShowTracked","setTokenListPage","pager","totalPages","Container","Pagination","onPageChange","Dropdown","text","token_SelectableTokenList","numVisibleTokens","ceil","sliceStart","TokenContracts","info","token_SelectableTokenListContainer","EventFilterContainer","tokenOptions","onTokenSelect","addressOptions","onAddressSelect","Field","search","selection","options","b","EventLoader","resultCount","resultFromBlock","resultToBlock","onLoadMore","canLoadMore","button","warning","EventLoaderContainer","loadMoreEvents","checkEventsLoaded","rangeEnd","currentBlock","rangeStart","loadTokenTransferEvents","resultFromBlockDate","event_EventLoader","hasAceEntry","Boolean","_callee5","chunkSize","maxEvents","numEvents","_loop","_context6","currentFromBlock","currentToBlock","transferEventsFrom","transferEventsTo","eventPromises","loggedEvents","foundEvents","_context5","Transfer","get","all","delegateYield","_x8","_x9","TxHashDisplay","txHash","shortHash","TRANSFER_EVENT_TYPES","TransferEvent","from","fromENS","toENS","quantity","positive","rowSpan","common_TxHashDisplay","TransferEventContainer","event_TransferEvent","rawEvent","_value","TransferEventsList","colSpan","transferEventIds","event_TransferEventContainer","TransferEventsListContainer","setTransferEventListPage","aceEventIds","event_TransferEventsList","changeTransferEventListPage","Events","event_EventFilterContainer","event_EventLoaderContainer","event_TransferEventsListContainer","EventsContainer","mapRouteParamsToState","segments_Events","match","params","setSelectedToken","setSelectedAddress","NetworkWarning","networkName","NetworkWarningController","web3_NetworkWarning","LayoutContainer","padded","web3_NetworkWarningController","segments_Sidebar","react_router","exact","path","component","location","web3Container","ModalLoader","TokenLoaderGate","tokenListUrl","loadTokenList","Children","only","children","common_ModalLoader","response","jsonTokens","allTokenIds","existingTrackedTokens","fetch","json","toUpperCase","Web3Gate","onRetry","Web3GateContainer","initialize","web3Gate","networkIdString","networkID","getNodePromise","getNetworkPromise","parseInt","Ens","provider","getBlockPromise","watch","blockHash","_block","oldNetworkId","_network","LocalStorageGate","trackedTokens","selectedTokendId","store","createStore","applyMiddleware","thunk","App","es","web3GateContainer","token_TokenLoaderGate","utils_LocalStorageGate","modal_ModalRoot","layout_LayoutContainer","isLocalhost","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","ReactDOM","render","src_App","document","getElementById","URL","process","origin","status","headers","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.1bef5a2b.chunk.js","sourcesContent":["import {loadTokenBalance} from '../token/tokenActions'\n\nexport const BALANCE_STATES = {\n    VIRGIN: 'virgin',\n    LOADING: 'loading',\n    INITIALIZED: 'initialized',\n}\n\nexport const SET_BALANCE = 'SET_BALANCE'\nexport function setBalance(balanceId, balance) {\n    return {\n        type: SET_BALANCE,\n        payload: {\n            balanceId,\n            balance,\n        }\n    }\n}\n\nexport const SET_BALANCE_STATE = 'SET_BALANCE_STATE'\nexport function setBalanceState(balanceId, balanceState) {\n    return {\n        type: SET_BALANCE_STATE,\n        payload: {\n            balanceId,\n            balanceState,\n        }\n    }\n}\n\nexport const CREATE_BALANCE_ENTRY = 'CREATE_BALANCE_ENTRY'\nexport function createBalanceEntry(balanceId, addressId, tokenId) {\n    return {\n        type: CREATE_BALANCE_ENTRY,\n        payload: {\n            balanceId,\n            addressId,\n            tokenId\n        }\n    }\n}\n\nexport const DELETE_BALANCE_ENTRY = 'DELETE_BALANCE_ENTRY'\nexport function deleteBalanceEntry(balanceId) {\n    return {\n        type: DELETE_BALANCE_ENTRY,\n        payload: {\n            balanceId,\n        }\n    }\n}\n\nexport const CHANGE_BALANCE_FILTER_PROPS = 'CHANGE_BALANCE_FILTER_PROPS'\nexport function changeBalanceFilterProps(filter, matchedBalanceIds) {\n    return {\n        type: CHANGE_BALANCE_FILTER_PROPS,\n        payload: {\n            filter,\n            matchedBalanceIds\n        }\n    }\n}\n\nexport function setBalanceFilterString(filterString) {\n    return (dispatch, getState) => {\n        // Filter balance list based on filterstring.\n        const searchString = filterString.toLowerCase()\n\n        // Default: Show all balances\n        let balanceIds = getState().balance.allIds\n\n        // If a searchstring is provided, filter balanceIds\n        if (searchString.length) {\n            balanceIds = balanceIds.filter(balanceId => {\n                const balanceEntry = getState().balance.byId[balanceId]\n                const token = getState().tokens.byId[balanceEntry.tokenId]\n                return (\n                    token.name.toLowerCase().includes(searchString) ||\n                    token.symbol.toLowerCase().includes(searchString) ||\n                    token.address.toLowerCase().includes(searchString)\n                )\n            })\n        }\n        dispatch(changeBalanceFilterProps(searchString, balanceIds))\n    }\n}\n\n\nexport function setBalanceByAddressAndToken(addressId, tokenId, balance) {\n    return(dispatch, getState) => {\n        let balanceId = buildBalanceId(addressId, tokenId)\n        if (getState().balance.byId[balanceId] === undefined) {\n            // create a new balance entry before setting balance\n            dispatch(createBalanceEntry(balanceId, addressId, tokenId))\n        }\n        // set balance\n        dispatch(setBalance(balanceId, balance))\n    }\n}\n\nexport function balanceStateChanged(tokenId, addressId, balanceState) {\n    return(dispatch, getState) => {\n        // obtain balanceID\n        let balanceId = buildBalanceId(addressId, tokenId)\n        if (getState().balance.byId[balanceId] === undefined) {\n            // create a new balance entry before setting balance\n            dispatch(createBalanceEntry(balanceId, addressId, tokenId))\n        }\n        // set loading state\n        dispatch(setBalanceState(balanceId, balanceState))\n    }\n}\n\nexport function reloadBalance(balanceId) {\n    return (dispatch, getState) => {\n        const balance = getState().balance.byId[balanceId]\n        dispatch(loadTokenBalance(balance.tokenId, balance.addressId))\n    }\n}\n\nexport function clearTokenBalances(tokenId) {\n    return (dispatch, getState) => {\n        const balancesToClear = Object.values(getState().balance.byId).filter(balanceEntry => {\n            return (balanceEntry.tokenId === tokenId)\n        })\n        balancesToClear.forEach(balanceEntry => {\n            dispatch(deleteBalanceEntry(balanceEntry.balanceId))\n        })\n    }\n}\n\nexport function clearAddressBalances(addressId) {\n    return (dispatch, getState) => {\n        const balancesToClear = Object.values(getState().balance.byId).filter(balanceEntry => {\n            return (balanceEntry.addressId === addressId)\n        })\n        balancesToClear.forEach(balanceEntry => {\n            dispatch(deleteBalanceEntry(balanceEntry.balanceId))\n        })\n    }\n}\n\nexport function buildBalanceId(addressId, tokenId) {\n    return (addressId + '-' + tokenId)\n}\n","import {\n    ACE_ENTRIES_BLOCK_RANGE_CHANGE, ACE_ENTRIES_LOADING_CHANGE, ADD_EVENTS, buildEventId,\n    CREATE_ACE_ENTRY, SET_ACE_ENTRY_EVENT_IDS\n} from '../eventActions'\nimport {CLEAR_TOKEN_LIST} from '../../token/tokenActions'\n\n/*\nPurpose: Store list of transfer events involving certain address\nand certain token contract.\nKeeps track of the block range already queried from web3 (firstBlock, lastBlock),\nso i can easily extend checked block range or refresh if outdated.\n */\nconst ADDRESS_CONTRACT_EVENTS_BY_ID_INITIAL = {}\n/*\nconst ADDRESS_CONTRACT_EVENTS_BY_ID_INITIAL = {\n    0xabc123-12: {\n        acesId: '0xabc123-12',    // <addressId>-<tokenId>\n        addressId: '0xabc123',\n        tokenId: 12\n        loading: false,\n        firstBlock: 0,\n        lastBlock: 0,\n        loadingFromBlock: 0,\n        loadingToBlock: 0,\n        loadingCurrentBlock: 0,\n        eventIds: [],\n    },\n}\n*/\n\nfunction clearAceEntries() {\n    return ADDRESS_CONTRACT_EVENTS_BY_ID_INITIAL\n}\n\nfunction createAceEntry(state, action) {\n    const {payload} = action\n    const {addressId, tokenId} = payload\n    const acesId = buildAddressContractEventId(addressId, tokenId)\n    return {\n        ...state,\n        [acesId] : {\n            acesId,\n            addressId,\n            tokenId,\n            isLoading: false,\n            firstBlock: 0,\n            lastBlock: 0,\n            eventIds: [],\n            loadingFromBlock: 0,\n            loadingToBlock: 0,\n            loadingCurrentBlock: 0,\n        }\n    }\n}\n\nfunction addTransferEvents(state, action) {\n    // Attach the new events to the address, if it is \"to\" or \"from\"\n    const {payload} = action\n    const {events, tokenId} = payload\n\n    const newState = {...state}\n\n    events.forEach(transferEvent => {\n        const transferEventId = buildEventId(transferEvent)\n        const {_from, _to} = transferEvent.args\n        const aceFromId = buildAddressContractEventId(_from, tokenId)\n        const aceToId = buildAddressContractEventId(_to, tokenId)\n        const aceIds = [aceToId, aceFromId]\n        aceIds.forEach(aceId => {\n            // only add event if an according aceEntry is existing!\n            if (newState[aceId]) {\n                // prevent duplicate eventID entries\n                    if (newState[aceId].eventIds.includes(transferEventId)) {\n                        console.warn(\"Ignoring duplicate event \" + transferEventId)\n                        return\n                    }\n                newState[aceId].eventIds = newState[aceId].eventIds.concat(transferEventId)\n            }\n        })\n    })\n    return newState\n}\n\nfunction aceEntriesLoadingChange(state, action) {\n    const {payload} = action\n    const {aceIds, isLoading, loadingFromBlock, loadingToBlock, loadingCurrentBlock} = payload\n\n    const newState = {...state}\n\n    aceIds.forEach(aceId => {\n        const aceEntry = newState[aceId]\n        if (aceEntry) {\n            newState[aceId] = {\n                ...aceEntry,\n                isLoading,\n                loadingFromBlock,\n                loadingToBlock,\n                loadingCurrentBlock,\n            }\n        }\n    })\n    return newState\n}\n\nfunction aceEntriesBlockRangeChange(state, action) {\n    const {payload} = action\n    const {aceIds, fromBlock, toBlock} = payload\n\n    const newState = {...state}\n\n    aceIds.forEach(aceId => {\n        const aceEntry = newState[aceId]\n        if (aceEntry) {\n            // update checked block range\n            if (aceEntry.firstBlock === 0) {\n                aceEntry.firstBlock = fromBlock\n            } else {\n                aceEntry.firstBlock = Math.min(fromBlock, aceEntry.firstBlock)\n            }\n            if (aceEntry.lastBlock === 0) {\n                aceEntry.lastBlock = toBlock\n            } else {\n                aceEntry.lastBlock = Math.max(toBlock, aceEntry.lastBlock)\n            }\n            newState[aceId] = aceEntry\n        }\n    })\n    return newState\n}\n\nfunction setAceEntryEventIds(state, action) {\n    const {payload} = action\n    const {aceId, eventIds} = payload\n\n    return {\n        ...state,\n        [aceId]: {\n            ...state[aceId],\n            eventIds\n        }\n    }\n}\n\nexport const addressContractEventsByIdReducer = (state=ADDRESS_CONTRACT_EVENTS_BY_ID_INITIAL, action) => {\n    switch (action.type) {\n        case CREATE_ACE_ENTRY:\n            return createAceEntry(state, action)\n        case ADD_EVENTS:\n            return addTransferEvents(state, action)\n        case ACE_ENTRIES_LOADING_CHANGE:\n            return aceEntriesLoadingChange(state, action)\n        case ACE_ENTRIES_BLOCK_RANGE_CHANGE:\n            return aceEntriesBlockRangeChange(state, action)\n        case SET_ACE_ENTRY_EVENT_IDS:\n            return setAceEntryEventIds(state, action)\n        case CLEAR_TOKEN_LIST:\n            return clearAceEntries()\n        default:\n    }\n    return state;\n}\n\n\nexport function buildAddressContractEventId(addressId, tokenId) {\n    return ''+addressId.toLowerCase()+'-'+tokenId\n}\n","import {buildAddressContractEventId} from './reducers/addressContractEventsByIdReducer'\n\nexport const ADD_EVENTS = 'ADD_EVENTS'\nexport function addEvents(events, tokenId) {\n    return {\n        type: ADD_EVENTS,\n        payload: {\n            events,\n            tokenId,\n        }\n    }\n}\n\nexport const CHANGE_TRANSFEREVENTLIST_PAGE = 'CHANGE_TRANSFEREVENTLIST_PAGE'\nexport function changeTransferEventListPage(activePage) {\n    return {\n        type: CHANGE_TRANSFEREVENTLIST_PAGE,\n        payload: {\n            activePage\n        }\n    }\n}\n\n\nexport const CREATE_ACE_ENTRY = 'CREATE_ACE_ENTRY'\nexport function createAceEntry(addressId, tokenId) {\n    return {\n        type: CREATE_ACE_ENTRY,\n        payload: {\n            addressId,\n            tokenId\n        }\n    }\n}\n\nexport const ACE_ENTRIES_LOADING_CHANGE = 'ACE_ENTRIES_LOADING_CHANGE'\nexport function aceEntriesLoadingChange(addressIds, tokenId, isLoading, loadingFromBlock, loadingToBlock, loadingCurrentBlock) {\n    const aceIds = addressIds.map(addressId => (buildAddressContractEventId(addressId, tokenId)))\n    return {\n        type: ACE_ENTRIES_LOADING_CHANGE,\n        payload: {\n            aceIds,\n            isLoading,\n            loadingFromBlock,\n            loadingToBlock,\n            loadingCurrentBlock,\n        }\n    }\n}\n\nexport const ACE_ENTRIES_BLOCK_RANGE_CHANGE = 'ACE_ENTRIES_BLOCK_RANGE_CHANGE'\nexport function aceEntriesBlockRangeChange(addressIds, tokenId, fromBlock, toBlock) {\n    const aceIds = addressIds.map(addressId => (buildAddressContractEventId(addressId, tokenId)))\n    return {\n        type: ACE_ENTRIES_BLOCK_RANGE_CHANGE,\n        payload: {\n            aceIds,\n            fromBlock,\n            toBlock,\n        }\n    }\n}\n\nexport const SET_ACE_ENTRY_EVENT_IDS = 'SET_ACE_ENTRY_EVENT_IDS'\nexport function setAceEntryEventIds(aceId, eventIds) {\n    return {\n        type: SET_ACE_ENTRY_EVENT_IDS,\n        payload: {\n            aceId,\n            eventIds\n        }\n    }\n}\n\nexport const CHANGE_EVENT_SCAN_PROPS = 'CHANGE_EVENT_SCAN_PROPS'\nexport function changeEventScanProps(props) {\n    return {\n        type: CHANGE_EVENT_SCAN_PROPS,\n        payload: {\n            props,\n        }\n    }\n}\n\nexport function aceEntriesLoadingChangeWrapper(addressIds, tokenId, isLoading, loadingFromBlock, loadingToBlock, loadingCurrentBlock) {\n    return async (dispatch, getState) => {\n        addressIds.forEach(addressId => {\n            const aceId = buildAddressContractEventId(addressId, tokenId)\n            if (getState().events.aceById[aceId] === undefined) {\n                // create a new entry for this token and address\n                dispatch(createAceEntry(addressId, tokenId))\n            }\n        })\n        dispatch(aceEntriesLoadingChange(addressIds, tokenId, isLoading, loadingFromBlock, loadingToBlock, loadingCurrentBlock))\n    }\n}\n\nexport function addEventsThunk(events, tokenId, fromBlock, toBlock) {\n    return (dispatch, getState) => {\n        // Make sure that there are AddressContractEvent entries\n        // for all events and to/from addresses\n        let aceIdsToSort = []\n        const watchedAddressIds = getState().addresses.allIds\n        events.forEach(transferEvent => {\n            const {_from, _to} = transferEvent.args\n            // TODO: Collect all new entries and just dispatch one batch event\n            if (watchedAddressIds.includes(_from.toLowerCase())) {\n                const aceFromId = buildAddressContractEventId(_from, tokenId)\n                aceIdsToSort.push(aceFromId)\n                if (getState().events.aceById[aceFromId] === undefined) {\n                    // create a new entry for this token and address\n                    dispatch(createAceEntry(_from, tokenId))\n                }\n            }\n            if (watchedAddressIds.includes(_to.toLowerCase())) {\n                const aceToId = buildAddressContractEventId(_to, tokenId)\n                aceIdsToSort.push(aceToId)\n                if (getState().events.aceById[aceToId] === undefined) {\n                    // create a new entry for this token and address\n                    dispatch(createAceEntry(_to, tokenId))\n                }\n            }\n        })\n        // now it's safe to do the actual dispatch of addEvents\n        dispatch(addEvents(events, tokenId, fromBlock, toBlock))\n        // finally re-sort eventIds of all changed aceIds\n        dispatch(sortEventsThunk(aceIdsToSort))\n    }\n}\n\nexport function sortEventsThunk(aceIds) {\n    return (dispatch, getState) => {\n        const eventsById = getState().events.byId\n        // sort eventIds of provided ace entries based on the blockheight they appeared at\n        aceIds.forEach(aceId => {\n            // sort eventIds based on blockheight\n            // use .slice() to work on a copy of the eventIds array, otherwise i would mutate current state...\n            let eventIds = getState().events.aceById[aceId].eventIds.slice().sort((eventA, eventB) => {\n                return eventsById[eventB].transferEvent.blockNumber - eventsById[eventA].transferEvent.blockNumber\n            })\n            // set new eventIds array via dedicated action\n            dispatch(setAceEntryEventIds(aceId, eventIds))\n        })\n    }\n}\n\nexport function buildEventId(event) {\n    return '' + event.transactionHash + '-' + event.logIndex\n}\n","\nexport const TRACKED_TOKEN_KEYS = 'TRACKED_TOKEN_KEYS'\nexport const SELECTED_TOKEN_KEY = 'SELECTED_TOKEN_KEY'\nexport const WATCHED_ADDRESSES = 'WATCHED_ADDRESSES'\n\nexport function storeLocalData(key, data) {\n    // console.log(\"Storing \" + key + \" -> \" + data)\n    localStorage.setItem(key, JSON.stringify(data))\n}\n\nexport function getLocalData(key, defaultValue) {\n    try {\n        let data = JSON.parse(localStorage.getItem(key))\n        if (data) {\n            // console.log(\"Loaded data for key \" + key + \": \" + data)\n            return data\n        }\n    }\n    catch (e) {\n        // console.log(\"Exception \" + e + \" looking for \" + key)\n    }\n    // console.log(\"No data found for key \" + key)\n    return defaultValue\n}\n","import contract from 'truffle-contract'\r\nimport erc20ABI from 'human-standard-token-abi'\r\nimport {\r\n    BALANCE_STATES,\r\n    balanceStateChanged,\r\n    clearTokenBalances,\r\n    setBalanceByAddressAndToken\r\n} from '../balance/balanceActions'\r\nimport {\r\n    aceEntriesBlockRangeChange, aceEntriesLoadingChange, aceEntriesLoadingChangeWrapper,\r\n    addEventsThunk, changeEventScanProps\r\n} from '../event/eventActions'\r\nimport {\r\n    storeLocalData,\r\n    SELECTED_TOKEN_KEY,\r\n    TRACKED_TOKEN_KEYS,\r\n} from \"../../utils/localStorageWrapper\"\r\n\r\nexport const ETH_TOKEN_MAGIC_ADDRESS = \"0x1000000000000000000000000000000000000001\"\r\nexport const ETH_TOKEN_DUMMY = {\r\n    \"name\": \"Ethereum\",\r\n    \"symbol\": \"ETH\",\r\n    \"address\": ETH_TOKEN_MAGIC_ADDRESS,\r\n    \"decimals\": 18\r\n}\r\n\r\nexport const TOKEN_LIST_STATES = {\r\n    VIRGIN: 'virgin',\r\n    LOADING: 'loading',\r\n    INITIALIZED: 'initialized'\r\n}\r\n\r\nexport const CHANGE_TOKEN_LIST_STATE = 'IS_LOADING_TOKEN_LIST'\r\nexport function tokenListStateChanged(tokenListState) {\r\n    return {\r\n        type: CHANGE_TOKEN_LIST_STATE,\r\n        payload: {\r\n            listState: tokenListState\r\n        }\r\n    }\r\n}\r\n\r\nexport const ADD_TOKEN = 'ADD_TOKEN'\r\nexport function addToken(tokenID, token) {\r\n    return {\r\n        type: ADD_TOKEN,\r\n        payload: {\r\n            tokenID,\r\n            token\r\n        }\r\n    }\r\n}\r\n\r\nexport const ADD_VOLATILE_TOKEN = 'ADD_VOLATILE_TOKEN'\r\nexport function addVolatileToken(tokenID) {\r\n    return {\r\n        type: ADD_VOLATILE_TOKEN,\r\n        payload: {\r\n            tokenID,\r\n        }\r\n    }\r\n}\r\n\r\nexport const IS_LOADING_TOKEN = 'IS_LOADING_TOKEN'\r\nexport function loadingTokenChanged(tokenID, isLoading) {\r\n    return {\r\n        type: IS_LOADING_TOKEN,\r\n        payload: {\r\n            tokenID,\r\n            isLoading\r\n        }\r\n    }\r\n}\r\n\r\nexport const SET_TOKEN_SUPPLY = 'SET_TOKEN_SUPPLY'\r\nexport function setTokenSupply(tokenID, supply) {\r\n    return {\r\n        type: SET_TOKEN_SUPPLY,\r\n        payload: {\r\n            tokenID,\r\n            supply,\r\n        }\r\n    }\r\n}\r\n\r\nexport const IS_LOADING_SUPPLY = 'IS_LOADING_SUPPLY'\r\nexport function loadingSupplyChanged(tokenID, isLoading) {\r\n    return {\r\n        type: IS_LOADING_SUPPLY,\r\n        payload: {\r\n            tokenID,\r\n            isLoading\r\n        }\r\n    }\r\n}\r\n\r\nexport const SET_TOKEN_CONTRACT_INSTANCE = 'SET_TOKEN_CONTRACT_INSTANCE'\r\nexport function setTokenContractInstance(tokenID, contractInstance) {\r\n    return {\r\n        type: SET_TOKEN_CONTRACT_INSTANCE,\r\n        payload: {\r\n            tokenID,\r\n            contractInstance\r\n        }\r\n    }\r\n}\r\n\r\nexport const SET_TOKEN_LOADING_PROMISE = 'SET_TOKEN_LOADING_PROMISE'\r\nexport function setTokenLoadingPromise(tokenID, loadingPromise) {\r\n    return {\r\n        type: SET_TOKEN_LOADING_PROMISE,\r\n        payload: {\r\n            tokenID,\r\n            loadingPromise\r\n        }\r\n    }\r\n}\r\n\r\nexport function changeSelectorTokenIdThunk(selectedTokenId) {\r\n    return (dispatch, getState) => {\r\n        // update state\r\n        dispatch(changeSelectorTokenId(selectedTokenId))\r\n        // update localstorage\r\n        storeLocalData(SELECTED_TOKEN_KEY, getState().tokens.selector.selectedTokenId)\r\n    }\r\n}\r\n\r\nexport const CHANGE_SELECTOR_TOKENID = 'CHANGE_SELECTOR_TOKENID'\r\nexport function changeSelectorTokenId(selectedTokenId) {\r\n    return {\r\n        type: CHANGE_SELECTOR_TOKENID,\r\n        payload: {\r\n            selectedTokenId,\r\n        }\r\n    }\r\n}\r\n\r\nexport const CLEAR_TOKEN_LIST = 'CLEAR_TOKEN_LIST'\r\nexport function clearTokenList() {\r\n    return {\r\n        type: CLEAR_TOKEN_LIST,\r\n    }\r\n}\r\n\r\nexport const CHANGE_VALID_TOKEN_COUNT = 'CHANGE_VALID_TOKEN_COUNT'\r\nexport function changeValidTokenCount(count) {\r\n    return {\r\n        type: CHANGE_VALID_TOKEN_COUNT,\r\n        payload: {\r\n            count\r\n        }\r\n    }\r\n}\r\n\r\nexport const CHANGE_FILTER_PROPS = 'CHANGE_FILTER_PROPS'\r\nexport function changeFilterProps(filter, matchedTokenIds, showOnlyTracked, filterIsActive) {\r\n    return {\r\n        type: CHANGE_FILTER_PROPS,\r\n        payload: {\r\n            filter,\r\n            matchedTokenIds,\r\n            showOnlyTracked,\r\n            filterIsActive,\r\n        }\r\n    }\r\n}\r\n\r\nexport const RESET_DISPLAY_COUNT = 'RESET_DISPLAY_COUNT'\r\nexport function resetDisplayCount() {\r\n    return {\r\n        type: RESET_DISPLAY_COUNT,\r\n    }\r\n}\r\n\r\nexport const CHANGE_TOKEN_TRACKING = 'CHANGE_TOKEN_TRACKING'\r\nexport function changeTokenTracking(tokenId, doTrack) {\r\n    return {\r\n        type: CHANGE_TOKEN_TRACKING,\r\n        payload: {\r\n            tokenId,\r\n            doTrack,\r\n        }\r\n    }\r\n}\r\n\r\nexport const CHANGE_TOKEN_LIST_PAGE = 'CHANGE_TOKENLIST_PAGE'\r\nexport function changeTokenListPage(activePage) {\r\n    return {\r\n        type: CHANGE_TOKEN_LIST_PAGE,\r\n        payload: {\r\n            activePage\r\n        }\r\n    }\r\n}\r\n\r\nexport function changeTokenTrackingThunk(tokenId, doTrack) {\r\n    return (dispatch, getState) => {\r\n        // update state\r\n        dispatch(changeTokenTracking(tokenId, doTrack))\r\n        // update localstorage\r\n        storeLocalData(TRACKED_TOKEN_KEYS, getState().tokens.trackedIds)\r\n        // if I start tracking a token, start getting balances right away\r\n        if (doTrack) {\r\n            getState().addresses.allIds.forEach(addressId => {\r\n                    dispatch(loadTokenBalance(tokenId, addressId))\r\n                }\r\n            )\r\n        } else {\r\n            // If I stop tracking a token, also clear all balances for it\r\n            dispatch(clearTokenBalances(tokenId))\r\n        }\r\n    }\r\n}\r\n\r\nexport function setFilterProps(filterProps) {\r\n    return (dispatch, getState) => {\r\n\r\n        let {filterString, showOnlyTracked} = filterProps\r\n        const oldFilterString = getState().tokens.listState.filter.toLowerCase()\r\n        const oldShowOnlyTracked = getState().tokens.listState.showOnlyTracked\r\n        if (filterString === undefined) {\r\n            filterString = oldFilterString\r\n        }\r\n        if (showOnlyTracked === undefined) {\r\n            showOnlyTracked = oldShowOnlyTracked\r\n        }\r\n\r\n        // Filter token list based on filterstring and show tracked only/all\r\n        const searchString = filterString.toLowerCase()\r\n        const filterIsActive = ((searchString.length > 0) || showOnlyTracked)\r\n        const filterChanged = ((oldFilterString !== searchString) || (oldShowOnlyTracked !== showOnlyTracked))\r\n\r\n        if (filterChanged) {\r\n            // in case filter props changed, reset the number of displayed tokens to it's default value and set\r\n            // default page\r\n            dispatch(resetDisplayCount())\r\n            dispatch(changeTokenListPage(1))\r\n        }\r\n\r\n        // start with all tokens\r\n        let tokenIds = getState().tokens.allIds\r\n\r\n        // filter by tracked status\r\n        if (showOnlyTracked) {\r\n            // get all tokens that are being tracked\r\n            tokenIds = getState().tokens.trackedIds\r\n        }\r\n\r\n        // filter by search string\r\n        if (searchString.length) {\r\n            tokenIds = tokenIds.filter(tokenId => {\r\n                const token = getState().tokens.byId[tokenId]\r\n                return (\r\n                    token.name.toLowerCase().includes(searchString) ||\r\n                    token.symbol.toLowerCase().includes(searchString) ||\r\n                    token.address.toLowerCase().includes(searchString)\r\n                )\r\n            })\r\n        }\r\n\r\n        dispatch(changeFilterProps(searchString, tokenIds, showOnlyTracked, filterIsActive))\r\n    }\r\n}\r\n\r\n\r\nexport function loadTokenList(url) {\r\n    return async (dispatch, getState) => {\r\n        // clear existing tokens\r\n        dispatch(clearTokenList())\r\n        dispatch(tokenListStateChanged(TOKEN_LIST_STATES.LOADING))\r\n        // fetch json file from url\r\n        const response = await fetch(url)\r\n        // parse json\r\n        const jsonTokens = await response.json()\r\n\r\n        // inject ETH dummy token\r\n        jsonTokens.push(ETH_TOKEN_DUMMY)\r\n\r\n        // sort token list alphabetically\r\n        jsonTokens.sort((a, b) => ( (a.name.toUpperCase() < b.name.toUpperCase()) ? -1 : 1))\r\n\r\n        // set total number of tokens (for loading progress)\r\n        dispatch(changeValidTokenCount(jsonTokens.length))\r\n\r\n        // add tokens\r\n        jsonTokens.forEach((listToken) => {\r\n            const token = mapListToken(listToken)\r\n            dispatch(addToken(token.address, token))\r\n        })\r\n\r\n        // if there is already a filter set, re-evaluate the filter results\r\n        if (getState().tokens.listState.filterIsActive) {\r\n            dispatch(setFilterProps({}))\r\n        }\r\n\r\n        // Crosscheck tokens with currently tracked tokens\r\n        const allTokenIds = getState().tokens.allIds\r\n        const existingTrackedTokens = getState().tokens.trackedIds.filter(tokenId => {\r\n            return (allTokenIds.indexOf(tokenId) > -1)\r\n        })\r\n        // load balances for tracked tokens\r\n        if (existingTrackedTokens.length) {\r\n            getState().addresses.allIds.forEach(addressId => {\r\n                    dispatch(loadMultiTokenBalances(existingTrackedTokens, addressId))\r\n                }\r\n            )\r\n        }\r\n\r\n        // stop tracking non-existing tokens\r\n        const trackedTokensToRemove = getState().tokens.trackedIds.filter(tokenId => {\r\n            return (existingTrackedTokens.indexOf(tokenId) === -1)\r\n        })\r\n        trackedTokensToRemove.forEach(tokenId => {\r\n            dispatch(changeTokenTracking(tokenId, false))\r\n        })\r\n\r\n        // Finished loading\r\n        dispatch(tokenListStateChanged(TOKEN_LIST_STATES.INITIALIZED))\r\n    }\r\n}\r\n\r\nfunction mapListToken(listToken) {\r\n    return {\r\n        id: listToken['address'],\r\n        address: listToken['address'],\r\n        symbol: listToken['symbol'],\r\n        decimals: Math.pow(10, listToken['decimals']),\r\n        name: listToken['name'],\r\n        description: null,\r\n        website: listToken['website'],\r\n        imageUrl: null,\r\n\r\n        supply: {\r\n            loading: false,\r\n            supply: undefined\r\n        },\r\n        balance: undefined,\r\n        eventIds: [],\r\n        loading: false,\r\n    }\r\n}\r\n\r\nexport function instantiateTokenContract(tokenID) {\r\n    return (dispatch, getState) => {\r\n        // create promise that resolves as soon as the contract is instantiated.\r\n        const loadingPromise = new Promise(\r\n            async function(resolve, reject) {\r\n                if (tokenID === ETH_TOKEN_MAGIC_ADDRESS) {\r\n                    // This is the dummy token entry for plain ether\r\n                    // indicate we finished loading the token\r\n                    dispatch(loadingTokenChanged(tokenID, false))\r\n                    // finally resolve loading promise\r\n                    resolve()\r\n                } else {\r\n                    // indicate we are loading the token\r\n                    dispatch(loadingTokenChanged(tokenID, true))\r\n                    // create token contract instance and store it for later use in state\r\n                    const token = getState().tokens.byId[tokenID]\r\n                    const {web3} = getState().web3Instance\r\n                    const ERC20Contract = contract({abi: erc20ABI})\r\n                    ERC20Contract.setProvider(web3.currentProvider)\r\n                    const contractInstance = await ERC20Contract.at(token.address)\r\n                    dispatch(setTokenContractInstance(tokenID, contractInstance))\r\n                    // indicate we finished loading the token\r\n                    dispatch(loadingTokenChanged(tokenID, false))\r\n                    // finally resolve loading promise\r\n                    resolve()\r\n                }\r\n            }\r\n        )\r\n        dispatch(setTokenLoadingPromise(tokenID, loadingPromise))\r\n    }\r\n}\r\n\r\nexport function loadTokenBalance(tokenID, addressId) {\r\n    return loadMultiTokenBalances([tokenID], addressId)\r\n}\r\n\r\nexport function loadMultiTokenBalances(tokenIDs, addressId) {\r\n    return async (dispatch, getState) => {\r\n        tokenIDs.forEach(async tokenId => {\r\n            dispatch(balanceStateChanged(tokenId, addressId, BALANCE_STATES.LOADING))\r\n            const address = getState().addresses.byId[addressId].address\r\n            let balance\r\n            if (tokenId === ETH_TOKEN_MAGIC_ADDRESS) {\r\n                balance = await getState().web3Instance.web3.eth.getBalancePromise(address)\r\n            } else {\r\n                await verifyContractInstance(tokenId, dispatch, getState)\r\n                const volatileToken = getState().tokens.volatileById[tokenId]\r\n                balance = await volatileToken.contractInstance.balanceOf(address)\r\n            }\r\n            dispatch(setBalanceByAddressAndToken(addressId, tokenId, balance))\r\n            dispatch(balanceStateChanged(tokenId, addressId, BALANCE_STATES.INITIALIZED))\r\n        })\r\n    }\r\n}\r\n\r\nexport function loadTokenTransferEvents(tokenID, fromBlock, toBlock, addresses) {\r\n    return async (dispatch, getState) => {\r\n        if(tokenID === ETH_TOKEN_MAGIC_ADDRESS) {\r\n            // FIXME - Implement this.\r\n            //  See https://ethereum.stackexchange.com/questions/2531/common-useful-javascript-snippets-for-geth/3478#3478\r\n            //  for sample code to get started\r\n            return\r\n        }\r\n\r\n        const chunkSize = 100\r\n        const maxChunks = 100\r\n        const maxEvents = 50\r\n\r\n        let currentChunk = 1\r\n        let numEvents = 0\r\n\r\n        // if no from/toblock are provided, use default values\r\n        if (fromBlock === 0)\r\n            fromBlock = getState().web3Instance.block.number - (chunkSize * maxChunks)\r\n        if (toBlock === 0)\r\n            toBlock = getState().web3Instance.block.number\r\n\r\n        dispatch(aceEntriesLoadingChangeWrapper(addresses, tokenID, true, fromBlock, toBlock, fromBlock))\r\n        await verifyContractInstance(tokenID, dispatch, getState)\r\n        const contractInstance = getState().tokens.volatileById[tokenID].contractInstance\r\n\r\n        while ((currentChunk <= maxChunks) && (numEvents <= maxEvents)) {\r\n            // calculate fromBlock for current chunk\r\n            let currentFromBlock = fromBlock + ((currentChunk-1) * chunkSize)\r\n            // calculate toBlock for current chunk\r\n            let currentToBlock = currentFromBlock + chunkSize\r\n\r\n            // update progress info\r\n            dispatch(changeEventScanProps({\r\n                tokenID,\r\n                addresses,\r\n                numEvents,\r\n                currentChunk,\r\n                maxEvents,\r\n                maxChunks,\r\n                fromBlock,\r\n                toBlock,\r\n                state: 'scanning'\r\n            }))\r\n\r\n            // obtain events for this chunk\r\n            // console.log(\"Calling 'Transfer' from \" + addresses + \", blockrange: \" + currentFromBlock + \" - \" + currentToBlock)\r\n            const transferEventsFrom = contractInstance.Transfer(\r\n                {\r\n                    // These are the standard ERC20 Transfer event fields\r\n                    _from: addresses,    // addresses sending token\r\n                    _to: null,      // addresses receiving token\r\n                },\r\n                {\r\n                    fromBlock: currentFromBlock,\r\n                    toBlock: currentToBlock,\r\n                }\r\n            )\r\n            //console.log(\"Calling 'Transfer' to \" + addresses + \", blockrange: \" + currentFromBlock + \" - \" + currentToBlock)\r\n            const transferEventsTo = contractInstance.Transfer(\r\n                {\r\n                    // These are the standard ERC20 Transfer event fields\r\n                    _from: null,    // addresses sending token\r\n                    _to: addresses,      // addresses receiving token\r\n                },\r\n                {\r\n                    fromBlock: currentFromBlock,\r\n                    toBlock: currentToBlock,\r\n                }\r\n            )\r\n\r\n            // Wrap this into promise and await it, otherwise loading:false action will be dispatched too early!\r\n            let eventPromises = []\r\n            eventPromises.push(new Promise((resolve, reject) => {\r\n                transferEventsFrom.get(function (error, events) {\r\n                    if (error) {\r\n                        console.error(\"Error getting events for token \" + tokenID + \": \" + error)\r\n                        reject(\"Error getting events for token \" + tokenID + \": \" + error)\r\n                    } else {\r\n                        // console.log(\"Found \" + events.length + \" 'from' Events: \" + events)\r\n                        if (events.length) {\r\n                            dispatch(addEventsThunk(events, tokenID))\r\n                        }\r\n                        resolve(events.length)\r\n                    }\r\n                })\r\n            }))\r\n            eventPromises.push(new Promise((resolve, reject) => {\r\n                transferEventsTo.get(function (error, events) {\r\n                    if (error) {\r\n                        console.error(\"Error getting events for token \" + tokenID + \": \" + error)\r\n                        reject(\"Error getting events for token \" + tokenID + \": \" + error)\r\n                    } else {\r\n                        //console.log(\"Found \" + events.length + \" 'to' Events: \" + events)\r\n                        if (events.length) {\r\n                            dispatch(addEventsThunk(events, tokenID))\r\n                        }\r\n                        resolve(events.length)\r\n                    }\r\n                })\r\n            }))\r\n            // Wait till both promises are resolved and add up the found number of events.\r\n            const loggedEvents = await Promise.all(eventPromises)\r\n            const foundEvents = loggedEvents.reduce((a, b) => a + b, 0)\r\n\r\n            dispatch(aceEntriesBlockRangeChange(addresses, tokenID, currentFromBlock, currentToBlock))\r\n            // increment currentChunk\r\n            currentChunk++\r\n            // update numEvents with number of found events\r\n            numEvents += foundEvents\r\n        }\r\n\r\n        dispatch(aceEntriesLoadingChange(addresses, tokenID, false, 0, 0, 0))\r\n    }\r\n}\r\n\r\nasync function verifyContractInstance(tokenId, dispatch, getState) {\r\n    let volatileToken = getState().tokens.volatileById[tokenId]\r\n    if (volatileToken === undefined) {\r\n        // Create an entry to continue\r\n        dispatch(addVolatileToken(tokenId))\r\n        volatileToken = getState().tokens.volatileById[tokenId]\r\n    }\r\n    if (volatileToken.loadingPromise) {\r\n        // token is already loading. Just return the promise.\r\n        return volatileToken.loadingPromise\r\n    }\r\n    else {\r\n        dispatch(instantiateTokenContract(tokenId))\r\n        // refresh token, as the loadingPromise has just been added to state\r\n        volatileToken = getState().tokens.volatileById[tokenId]\r\n        return volatileToken.loadingPromise\r\n    }\r\n}\r\n\r\nexport const TRANSACTION_STATES = {\r\n    IDLE: 'IDLE',\r\n    INITIALIZING: 'INITIALIZING',\r\n    WAITING_FOR_SIGNATURE: 'WAITING_FOR_SIGNATURE',\r\n    WAITING_FOR_CONFIRMATION: 'WAITING_FOR_CONFIRMATION',\r\n    CONFIRMED: 'CONFIRMED',\r\n    FAILED: 'FAILED'\r\n}\r\n\r\nexport function transferToken(tokenID, tokenAmount, fromAddress, toAddress) {\r\n    return async (dispatch, getState) => {\r\n        /*\r\n            Commented out until doing implementation\r\n\r\n        dispatch(changeTransactionState(TRANSACTION_STATES.INITIALIZING))\r\n\r\n        // obtain token contract instance\r\n        await verifyContractInstance(tokenID, dispatch, getState)\r\n        const contractInstance = getState().tokens.volatileById[tokenID].contractInstance\r\n        // TODO: check if eth balance is sufficient for required gas\r\n        // TODO: check if token balance is sufficient\r\n\r\n        dispatch(changeTransactionState(TRANSACTION_STATES.WAITING_FOR_SIGNATURE))\r\n        // TODO: initialize transfer\r\n\r\n        dispatch(changeTransactionState(TRANSACTION_STATES.WAITING_FOR_CONFIRMATION))\r\n\r\n        // finalize transfer\r\n        dispatch(changeTransactionState(TRANSACTION_STATES.CONFIRMED))\r\n\r\n         */\r\n    }\r\n}\r\n\r\nexport const CHANGE_TRANSACTION_STATE = 'CHANGE_TRANSACTION_STATE'\r\nexport function changeTransactionState(transactionState, message='') {\r\n    return {\r\n        type: CHANGE_TRANSACTION_STATE,\r\n        payload: {\r\n            transactionState,\r\n            message\r\n        }\r\n    }\r\n}\r\n","import {\n    CHANGE_FILTER_PROPS,\n    CHANGE_TOKEN_LIST_PAGE,\n    CHANGE_TOKEN_LIST_STATE,\n    CHANGE_VALID_TOKEN_COUNT, CLEAR_TOKEN_LIST,\n    RESET_DISPLAY_COUNT,\n    TOKEN_LIST_STATES\n} from '../tokenActions'\n\nconst LISTSTATE_INITIAL = {\n    listState: TOKEN_LIST_STATES.VIRGIN,\n    total: 0,\n    filter: '',\n    matchedTokenIds: [],\n    displayCount: 10,\n    showOnlyTracked: false,\n    filterIsActive: false,\n    activePage: 1,\n}\n\nfunction clearTokenList(state) {\n    return {\n        ...state,\n        displayCount: LISTSTATE_INITIAL.displayCount,\n        matchedTokenIds: LISTSTATE_INITIAL.matchedTokenIds,\n        activePage: LISTSTATE_INITIAL.activePage,\n        total: LISTSTATE_INITIAL.total,\n        listState: LISTSTATE_INITIAL.listState,\n    }\n}\n\nfunction resetDisplayCount(state) {\n    return {\n        ...state,\n        displayCount: LISTSTATE_INITIAL.displayCount\n    }\n}\n\nfunction tokenListStateChanged(state, action) {\n    // very simple reducer, just set a new state\n    const {payload} = action\n    const {listState} = payload\n    return {\n        ...state,\n        listState\n    }\n}\n\nfunction changeValidTokenCount(state, action){\n    const {payload} = action\n    const {count} = payload\n    return {\n        ...state,\n        total: count\n    }\n}\n\nfunction changeFilterProps(state, action){\n    const {payload} = action\n    const {filter, matchedTokenIds, showOnlyTracked, filterIsActive} = payload\n    return {\n        ...state,\n        filter,\n        matchedTokenIds,\n        showOnlyTracked,\n        filterIsActive,\n    }\n}\n\nfunction tokenListPageChanged(state, action)  {\n    const {payload} = action\n    const {activePage} = payload\n    return {\n        ...state,\n        activePage,\n    }\n}\n\nexport const listStateReducer = (state=LISTSTATE_INITIAL, action) => {\n    switch (action.type) {\n        case CHANGE_TOKEN_LIST_STATE:\n            return tokenListStateChanged(state, action)\n        case CHANGE_VALID_TOKEN_COUNT:\n            return changeValidTokenCount(state, action)\n        case CHANGE_FILTER_PROPS:\n            return changeFilterProps(state, action)\n        case RESET_DISPLAY_COUNT:\n            return resetDisplayCount(state)\n        case CHANGE_TOKEN_LIST_PAGE:\n            return tokenListPageChanged(state, action)\n        case CLEAR_TOKEN_LIST:\n            return clearTokenList(state)\n        default:\n            return state\n    }\n}\n\n","import {\n    ADD_TOKEN, CLEAR_TOKEN_LIST, IS_LOADING_SUPPLY, IS_LOADING_TOKEN,\n    SET_TOKEN_SUPPLY\n} from '../tokenActions'\nimport {ADD_EVENTS, buildEventId} from '../../event/eventActions'\n\nconst TOKENS_BY_ID_INITIAL = {}\n\nfunction clearTokensById() {\n    return TOKENS_BY_ID_INITIAL\n}\n\nfunction addTokenEntry(state, action) {\n    const {payload} = action\n    const {tokenID, token} = payload\n    // prevent duplicate entries\n    if (state[tokenID] === undefined) {\n        // insert new token\n        return {\n            ...state,\n            [tokenID]: token\n        }\n    } else {\n        // ignore duplicate...\n        return state\n    }\n}\n\nfunction loadingTokenChanged(state, action) {\n    const {payload} = action\n    const {tokenID, isLoading} = payload\n    // Look up the correct token, to simplify the rest of the code\n    const token = state[tokenID]\n    return {\n        ...state,\n        // Update our Token object with a new supply value\n        [tokenID]: {\n            ...token,\n            loading: isLoading\n        }\n    }\n}\n\nfunction setTokenSupply(state, action) {\n    const {payload} = action\n    const {tokenID, supply} = payload\n    // Look up the correct token, to simplify the rest of the code\n    const token = state[tokenID]\n\n    return {\n        ...state,\n        // Update our Token object with a new supply value\n        [tokenID]: {\n            ...token,\n            supply: {\n                ...token.supply,\n                supply\n            }\n        }\n    }\n}\n\nfunction loadingSupplyChanged(state, action) {\n    const {payload} = action\n    const {tokenID, isLoading} = payload\n    // Look up the correct token, to simplify the rest of the code\n    const token = state[tokenID]\n    return {\n        ...state,\n        // Update our Token object with a new supply value\n        [tokenID]: {\n            ...token,\n            supply: {\n                ...token.supply,\n                loading: isLoading\n            }\n        }\n    }\n}\n\nfunction addTransferEvents(state, action) {\n    // Attach the new event to the according token contract\n    const {payload} = action\n    const {events, tokenId} = payload\n\n    // Look up the correct token, to simplify the rest of the code\n    const token = state[tokenId]\n\n    let newEventIds = token.eventIds\n\n    events.forEach(transferEvent => {\n        const transferEventId = buildEventId(transferEvent)\n\n        if (newEventIds.includes(transferEventId)) {\n            console.warn(\"Ignoring duplicate event \" + transferEventId)\n            return\n        }\n        newEventIds = newEventIds.concat(transferEventId)\n    })\n\n    return {\n        ...state,\n        [tokenId]: {\n            ...token,\n            eventIds: newEventIds\n        }\n    }\n}\n\nexport const tokensByIdReducer = (state = TOKENS_BY_ID_INITIAL, action) => {\n    switch (action.type) {\n        case ADD_TOKEN: {\n            return addTokenEntry(state, action)\n        }\n        case IS_LOADING_TOKEN: {\n            return loadingTokenChanged(state, action)\n        }\n        case SET_TOKEN_SUPPLY: {\n            return setTokenSupply(state, action)\n        }\n        case IS_LOADING_SUPPLY: {\n            return loadingSupplyChanged(state, action)\n        }\n        case CLEAR_TOKEN_LIST: {\n            return clearTokensById(state, action)\n        }\n        case ADD_EVENTS: {\n            return addTransferEvents(state, action)\n        }\n        default:\n            return state\n    }\n}\n","import {ADD_TOKEN, CLEAR_TOKEN_LIST} from '../tokenActions'\n\nconst ALL_TOKENS_INITIAL = []\n\nfunction addTokenId(state, action) {\n    const {payload} = action\n    const {tokenID} = payload\n    // prevent duplicate token\n    if (state.indexOf(tokenID) === -1) {\n        // append the new token's ID to the list of all IDs\n        return state.concat(tokenID);\n    }\n    else {\n        // duplicate\n        return state\n    }\n}\n\nfunction clearAllTokens() {\n    return ALL_TOKENS_INITIAL\n}\n\nexport const allTokensReducer = (state=ALL_TOKENS_INITIAL, action) => {\n    switch (action.type) {\n        case ADD_TOKEN: {\n            return addTokenId(state, action)\n        }\n        case CLEAR_TOKEN_LIST: {\n            return clearAllTokens(state, action)\n        }\n        default:\n            return state\n    }\n}\n\n","import {\n    ADD_TOKEN, ADD_VOLATILE_TOKEN, CLEAR_TOKEN_LIST,\n    SET_TOKEN_CONTRACT_INSTANCE,\n    SET_TOKEN_LOADING_PROMISE,\n} from '../tokenActions'\n\nconst VOLATILE_TOKENS_BY_ID_INITIAL = {}\n\nfunction clearTokens() {\n    return VOLATILE_TOKENS_BY_ID_INITIAL\n}\n\nfunction setTokenContractInstance(state, action) {\n    const {payload} = action\n    const {tokenID, contractInstance} = payload\n    // Look up the correct token, to simplify the rest of the code\n    const token = state[tokenID]\n    return {\n        ...state,\n        [tokenID]: {\n            ...token,\n            contractInstance: contractInstance\n        }\n    }\n}\n\nfunction addTokenId(state, action) {\n    const {payload} = action\n    const {tokenID} = payload\n    // prevent duplicate entries\n    if (state[tokenID] === undefined) {\n        // insert new token\n        return {\n            ...state,\n            [tokenID]: {\n                tokenID,\n            }\n        }\n    } else {\n        // ignore duplicate...\n        return state\n    }\n}\n\n\nfunction setTokenLoadingPromise(state, action) {\n    const {payload} = action\n    const {tokenID, loadingPromise} = payload\n    // Look up the correct token, to simplify the rest of the code\n    const token = state[tokenID]\n    return {\n        ...state,\n        // Update our Token object with a new supply value\n        [tokenID]: {\n            ...token,\n            loadingPromise\n        }\n    }\n}\n\nexport const volatileTokensByIdReducer = (state = VOLATILE_TOKENS_BY_ID_INITIAL, action) => {\n    switch (action.type) {\n        case ADD_TOKEN: {\n            return addTokenId(state, action)\n        }\n        case ADD_VOLATILE_TOKEN: {\n            return addTokenId(state, action)\n        }\n        case SET_TOKEN_LOADING_PROMISE: {\n            return setTokenLoadingPromise(state, action)\n        }\n        case SET_TOKEN_CONTRACT_INSTANCE: {\n            return setTokenContractInstance(state, action)\n        }\n        case CLEAR_TOKEN_LIST: {\n            return clearTokens()\n        }\n        default:\n            return state\n    }\n}\n\n","import {CHANGE_TOKEN_TRACKING} from '../tokenActions'\n\nconst TRACKED_TOKENS_INITIAL = []\n\nfunction changeTokenTracking(state, action) {\n    const {payload} = action\n    const {tokenId, doTrack} = payload\n    // Check if this token is currently tracked\n    const trackedIndex = state.indexOf(tokenId)\n    if (doTrack && (trackedIndex === -1)) {\n        // Add new tracked entry\n        return state.concat(tokenId)\n    }\n    if (!doTrack && (trackedIndex > -1)) {\n        // remove existing tracked entry. Use \"filter\" instead of splice, as it returns a new array, while \"splice\"\n        // mutates the existing one.\n        return state.filter(id => (id !== tokenId))\n    }\n    // No need to change anything\n    return state\n}\n\nexport const trackedTokensReducer = (state=TRACKED_TOKENS_INITIAL, action) => {\n    switch (action.type) {\n        case CHANGE_TOKEN_TRACKING:\n            return changeTokenTracking(state, action)\n        default:\n            return state\n    }\n}\n\n","import Web3 from 'web3'\n/*\n Obtain web3 instance. Based on code from\n https://medium.com/metamask/https-medium-com-metamask-breaking-change-injecting-web3-7722797916a8\n */\nlet getWeb3 = new Promise(function (resolve, reject) {\n    // Wait for loading completion to avoid race conditions with web3 injection timing.\n    window.addEventListener('load', async () => {\n        let myWeb3\n\n        // Modern dapp browsers...\n        if (window.ethereum) {\n            myWeb3 = new Web3(window.ethereum)\n        }\n        // Legacy dapp browser\n        else if (window.web3) {\n            // Use Mist/MetaMask's provider.\n            myWeb3 = new Web3(window.web3.currentProvider);\n        }\n\n        if (myWeb3) {\n            console.log('Injected web3 detected.')\n            let results = {\n                web3: myWeb3\n            }\n            resolve(results)\n        } else {\n            let results = {\n                error: 'No web3 injected'\n            }\n            reject(results)\n        }\n    })\n})\n\nexport default getWeb3\n","//\n// Based on\n// https://ethereum.stackexchange.com/questions/11444/web3-js-with-promisified-api\n// and\n// https://gist.github.com/xavierlepretre/90f0feafccc07b267e44a87050b95caa\n//\n\nconst promisify = (web3) => {\n    // Pipes values from a Web3 callback.\n    let callbackToResolve = function (resolve, reject) {\n        return function (error, value) {\n            if (error) {\n                reject(error);\n            } else {\n                resolve(value);\n            }\n        };\n    };\n\n    // List synchronous functions masquerading as values.\n    const syncGetters = {\n        db: [],\n        eth: [ \"accounts\", \"blockNumber\", \"coinbase\", \"gasPrice\", \"hashrate\",\n            \"mining\", \"protocolVersion\", \"syncing\" ],\n        net: [ \"listening\", \"peerCount\" ],\n        personal: [ \"listAccounts\" ],\n        shh: [],\n        version: [ \"ethereum\", \"network\", \"node\", \"whisper\" ]\n    };\n\n    Object.keys(syncGetters).forEach(function(group) {\n        Object.keys(web3[group]).forEach(function (method) {\n            if (syncGetters[group].indexOf(method) > -1) {\n                // Skip\n            } else if (typeof web3[group][method] === \"function\") {\n                web3[group][method + \"Promise\"] = function () {\n                    let args = arguments;\n                    return new Promise(function (resolve, reject) {\n                        args[args.length] = callbackToResolve(resolve, reject);\n                        args.length++;\n                        web3[group][method].apply(web3[group], args);\n                    });\n                };\n            }\n        });\n    });\n}\n\nexport default promisify\n","import Ens from 'ethjs-ens'\nimport getWeb3 from '../../utils/getWeb3'\nimport {clearTokenList} from '../token/tokenActions'\nimport promisify from '../../utils/promisifyWeb3'\n\nexport const WEB3_STATES = {\n    UNINITIALIZED: 'uninitialized',\n    LOADING: 'loading',\n    INITIALIZED: 'initialized',\n    ERROR: 'error'\n}\n\nexport const ETH_ENABLE_STATES = {\n    REJECTED: 'rejected', // no access to eth.accounts\n    WAITING: 'waiting', // waiting for user confirmation in UI (e.g. metamask)\n    GRANTED: 'granted', // user has granted access to eth.accounts\n}\n\nexport const SET_WEB3_STATE = 'SET_WEB3_STATE'\nexport function setWeb3State(state) {\n    return {\n        type: SET_WEB3_STATE,\n        state\n    }\n}\n\nexport const SET_ETH_ENABLE_STATE = 'SET_ETH_ENABLE_STATE'\nexport function setEthEnableState(ethEnableState) {\n    return {\n        type: SET_ETH_ENABLE_STATE,\n        ethEnableState\n    }\n}\n\nexport const SET_WEB3INSTANCE = 'SET_WEB3INSTANCE'\nexport function setWeb3Instance(web3) {\n    return {\n        type: SET_WEB3INSTANCE,\n        web3\n    }\n}\n\nexport const SET_ENS = 'SET_ENS'\nexport function setENS(ens) {\n    return {\n        type: SET_ENS,\n        ens\n    }\n}\n\nexport const SET_CURRENT_BLOCK = 'SET_CURRENT_BLOCK'\nexport function setCurrentBlock(block) {\n    return {\n        type: SET_CURRENT_BLOCK,\n        block\n    }\n}\n\nexport const SET_NETWORK = 'SET_NETWORK'\nexport function setNetwork(id, name, previousId) {\n    return {\n        type: SET_NETWORK,\n        id,\n        name,\n        previousId,\n    }\n}\n\nexport const SET_NODE_VERSION = 'SET_NODE_VERSION'\nexport function setNodeVersion(nodeVersion) {\n    return {\n        type: SET_NODE_VERSION,\n        nodeVersion\n    }\n}\n\nexport const SET_BLOCK_FILTER = 'SET_BLOCK_FILTER'\nexport function setBlockFilter(blockFilter) {\n    return {\n        type: SET_BLOCK_FILTER,\n        blockFilter\n    }\n}\n\nexport function stopBlockFilter() {\n    return (dispatch, getState) => {\n        // Clean up any blockfilter that might be active\n        const {blockFilter} = getState().web3Instance\n        if (blockFilter) {\n            blockFilter.stopWatching((error, result) => {\n                if (error) {\n                    console.log(\"Error stopping blockfilter: \" + error)\n                }\n            })\n            dispatch(setBlockFilter(null))\n        }\n    }\n}\n\nexport function initialize() {\n    return async (dispatch, getState) => {\n        // stop any running block filter, just in case...\n        dispatch(stopBlockFilter())\n\n        // signal that web3 is being initialized\n        dispatch(setWeb3State(WEB3_STATES.LOADING))\n\n        // set web3 instance\n        try {\n            var {web3} = await getWeb3\n            // stop loading\n            dispatch(setWeb3State(WEB3_STATES.INITIALIZED))\n        }\n        catch(e) {\n            console.log(\"Error getting web3: \" + e)\n            dispatch(setWeb3State(WEB3_STATES.ERROR))\n            return;\n        }\n\n        // FIXME - Promisify can be removed once web3.js 1.0 is released\n        promisify(web3)\n        dispatch(setWeb3Instance(web3))\n\n        // set node info\n        const nodeVersion = await web3.version.getNodePromise()\n        dispatch(setNodeVersion(nodeVersion))\n\n        // set network info\n        const networkIdString = await web3.version.getNetworkPromise()\n        let networkID = parseInt(networkIdString, 10)\n        const network = getNetworkName(networkID)\n        dispatch(setNetwork(networkID, network, undefined))\n\n        // setup ens system\n        const ens = new Ens({\n            provider: web3.currentProvider,\n            network: networkID\n        })\n        dispatch(setENS(ens))\n\n        // set current block\n        const block = await web3.eth.getBlockPromise('latest')\n        dispatch(setCurrentBlock(block))\n\n        // start listening for new block events\n        const filter = web3.eth.filter('latest')\n        filter.watch(async (error, blockHash) => {\n            if (error) {\n                console.log(\"Error watching for block events: \" + error)\n            } else {\n                const block = await web3.eth.getBlockPromise(blockHash)\n                if (block) {\n                    dispatch(setCurrentBlock(block))\n                }\n                else {\n                    console.log(\"Ignoring null-block!\")\n                    console.log(block)\n                }\n            }\n        })\n        dispatch(setBlockFilter(filter))\n\n        // start watching for network change events\n        setInterval(async function () {\n            const networkIdString = await web3.version.getNetworkPromise()\n            let networkID = parseInt(networkIdString, 10)\n            const oldNetworkId = getState().web3Instance.id\n            if (oldNetworkId !== networkID) {\n                const network = getNetworkName(networkID)\n                dispatch(setNetwork(networkID, network, oldNetworkId))\n                dispatch(clearTokenList())\n            }\n        }, 1000)\n    }\n}\n\nexport function requestEthEnable() {\n    return async (dispatch, getState) => {\n        if (window.ethereum) {\n            // request access to user accounts as described in EIP-1102\n            try {\n                // signal that app is waiting for user action\n                dispatch(setEthEnableState(ETH_ENABLE_STATES.WAITING))\n                // request access\n                await window.ethereum.enable()\n                // signal success\n                dispatch(setEthEnableState(ETH_ENABLE_STATES.GRANTED))\n            } catch(error) {\n                // user rejected access\n                dispatch(setEthEnableState(ETH_ENABLE_STATES.REJECTED))\n            }\n        } else {\n            // must be a legacy browser, which should grant access by default.\n            dispatch(setEthEnableState(ETH_ENABLE_STATES.GRANTED))\n        }\n    }\n}\n\nfunction getNetworkName(networkId) {\n    let network = 'unknown'\n    switch (networkId) {\n        case 4447:\n            network = 'truffle test'\n            break\n        case 1:\n            network = 'mainnet'\n            break\n        case 2:\n            network = 'Morden (deprecated!)'\n            break\n        case 3:\n            network = 'Ropsten'\n            break\n        case 4:\n            network = 'Rinkeby'\n            break\n        case 42:\n            network = 'Kovan'\n            break\n        case 61:\n            network = 'ETC'\n            break\n        case 62:\n            network = 'ETC Testnet'\n            break\n        default:\n            network = 'Unknown'\n    }\n    return network\n}\n","import {CHANGE_SELECTOR_TOKENID} from '../tokenActions'\nimport {SET_NETWORK} from '../../web3/web3Actions'\n\nconst SELECTOR_INITIAL = {\n    selctedTokenId: undefined\n}\n\nfunction changeSelectorTokenId(state, action) {\n    const {payload} = action\n    const {selectedTokenId} = payload\n\n    return {\n        ...state,\n        selectedTokenId,\n    }\n}\n\nfunction setNetwork(state, action) {\n    const {id, previousId} = action\n    // if the existing network got changed, clear the selected token. If this\n    // is the initial setNetwork event after page load (previousID is undefined)\n    // keep the selectedTokenId\n    // NOTE: This will only start working when Metamask stops the full page reload on network change.\n    // See https://github.com/MetaMask/metamask-extension/issues/3599.\n    if (previousId && (previousId !== id))\n        return SELECTOR_INITIAL\n    else\n        return state\n}\n\nexport const selectorReducer = (state=SELECTOR_INITIAL, action) => {\n    switch (action.type) {\n        case CHANGE_SELECTOR_TOKENID:\n            return changeSelectorTokenId(state, action)\n        case SET_NETWORK:\n            return setNetwork(state, action)\n        default:\n            return state\n    }\n}\n\n","import {combineReducers} from \"redux\"\nimport {listStateReducer} from './ListStateReducer'\nimport {tokensByIdReducer} from './TokensByIdReducer'\nimport {allTokensReducer} from './AllIdsReducer'\nimport {volatileTokensByIdReducer} from './volatileTokensByIdReducer'\nimport {trackedTokensReducer} from './TrackedIdsReducer'\nimport {selectorReducer} from './SelectorReducer'\n\n/*\nState tree:\n{\n    listState: {\n        listState: 'loading'\n        filter: 'Dumb'\n        matchedTokenIds: [6]\n        total: 2\n        activePage: 1\n    }\n    byId: {\n        [1]: {\n            loading: true\n            tokenID: 1\n            name: 'GAVCoin'\n            address: '0x123456678'\n            contractInstance: null\n            supply: {\n                loading: true\n                supply: 0\n            }\n            balance: {\n                loading: false\n                supply: 0\n            }\n            ...\n        },\n        [6]: {\n            loading: false\n            tokenID: 6\n            name: 'DumbCoin'\n            address: '0x123456678'\n            contractInstance: <truffle-contract instance>\n            supply: {\n                loading: false\n                supply: 200000\n            }\n            balance: {\n                loading: false\n                supply: 0\n            }\n            ...\n        }\n    },\n    allIds: [1, 6],\n    trackedIds: [3, 4]\n}\n*/\n\nexport const tokens = combineReducers({\n    listState: listStateReducer,\n    byId : tokensByIdReducer,\n    allIds : allTokensReducer,\n    trackedIds: trackedTokensReducer,\n    volatileById: volatileTokensByIdReducer,\n    selector: selectorReducer,\n});\n","export function updateObject(oldObject, newValues) {\n    // Encapsulate the idea of passing a new object as the first parameter\n    // to Object.assign to ensure we correctly copy data instead of mutating\n    return Object.assign({}, oldObject, newValues);\n}\n\nexport function updateItemInArray(array, itemId, updateItemCallback) {\n    return array.map(item => {\n        if (item.id !== itemId) {\n            // Since we only want to update one item, preserve all others as they are now\n            return item;\n        }\n\n        // Use the provided callback to create an updated item\n        return updateItemCallback(item);\n    });\n}\n","import {updateObject} from \"../../utils/reducerUtils\"\nimport {\n    SET_CURRENT_BLOCK,\n    SET_WEB3INSTANCE,\n    SET_NETWORK,\n    SET_NODE_VERSION, SET_BLOCK_FILTER, WEB3_STATES, SET_WEB3_STATE, ETH_ENABLE_STATES, SET_ETH_ENABLE_STATE, SET_ENS,\n} from './web3Actions'\n\nconst WEB3_INITIAL = {\n    web3: null,\n    state: WEB3_STATES.UNINITIALIZED,\n    block: {\n        number: 0,\n        timestamp: 0\n    },\n    id: -1,\n    name: 'unknown',\n    blockFilter: null,\n    ethEnableState: ETH_ENABLE_STATES.REJECTED,\n    ens: undefined,\n}\n\nexport const web3Instance = (state=WEB3_INITIAL, action) => {\n    switch (action.type) {\n        case SET_WEB3_STATE:\n            return updateObject(state, {state: action.state})\n        case SET_ETH_ENABLE_STATE:\n            return updateObject(state, {ethEnableState: action.ethEnableState})\n        case SET_WEB3INSTANCE:\n            return updateObject(state, {web3: action.web3})\n        case SET_ENS:\n            return updateObject(state, {ens: action.ens})\n        case SET_CURRENT_BLOCK:\n            return updateObject(state, {block: action.block})\n        case SET_NETWORK:\n            return updateObject(state, {id: action.id, name: action.name})\n        case SET_NODE_VERSION:\n            return updateObject(state, {nodeVersion: action.nodeVersion})\n        case SET_BLOCK_FILTER:\n            return updateObject(state, {blockFilter: action.blockFilter})\n        default:\n    }\n    return state;\n}\n","import {loadMultiTokenBalances} from '../token/tokenActions'\nimport {clearAddressBalances} from '../balance/balanceActions'\nimport {storeLocalData, WATCHED_ADDRESSES} from \"../../utils/localStorageWrapper\"\n\nexport const ADDRESS_TYPE_EXTERNAL='ADDRESS_TYPE_EXTERNAL'\nexport const ADDRESS_TYPE_OWNED='ADDRESS_TYPE_OWNED'\nexport const ADDRESS_BALANCES_STATES = {\n    VIRGIN: 'virgin',\n    LOADING: 'loading',\n    INITIALIZED: 'initialized',\n}\n\nexport const CHANGE_ADDRESS_BALANCES_STATE = 'CHANGE_ADDRESS_BALANCES_STATE'\nexport function addressBalancesStateChanged(addressId, addressBalancesState) {\n    return {\n        type: CHANGE_ADDRESS_BALANCES_STATE,\n        payload: {\n            addressId,\n            addressBalancesState\n        }\n    }\n}\n\nexport const ADD_ADDRESS = 'ADD_ADDRESS'\nexport function addAddress(address, ensName, type) {\n    return {\n        type: ADD_ADDRESS,\n        payload: {\n            addressId: address,\n            address,\n            ensName,\n            type\n        }\n    }\n}\n\n\nexport function removeAddressThunk(addressId) {\n    return (dispatch, getState) => {\n        // remove from state\n        dispatch(removeAddress(addressId))\n        // remove all balance entries\n        dispatch(clearAddressBalances(addressId))\n        // update localStorage\n        const addressesToStore = Object.values(getState().addresses.byId).map(o => (\n            {\n                address: o.address,\n                ensName: o.ensName\n            })\n        )\n        storeLocalData(WATCHED_ADDRESSES, addressesToStore)\n    }\n}\n\nexport const REMOVE_ADDRESS='REMOVE_ADDRESS'\nexport function removeAddress(addressId) {\n    return {\n        type: REMOVE_ADDRESS,\n        payload: {\n            addressId\n        }\n    }\n}\n\nexport const CHANGE_ADDRESS_TYPE='CHANGE_ADDRESS_TYPE'\nexport function changeAddressType(addressId, newType) {\n    return {\n        type: CHANGE_ADDRESS_TYPE,\n        payload: {\n            addressId,\n            newType,\n        }\n    }\n}\n\nexport function addNewAddress(address, ensName, type) {\n    return (dispatch, getState) => {\n        // a new address is added.\n        // make sure that all addresses are stored in lowercase\n        address = address.toLowerCase()\n        // add address to store\n        dispatch(addAddress(address, ensName, type))\n        // save address in localStorage\n        const addressesToStore = Object.values(getState().addresses.byId).map(o => (\n            {\n                address: o.address,\n                ensName: o.ensName\n            })\n        )\n        storeLocalData(WATCHED_ADDRESSES, addressesToStore)\n        // If i'm tracking tokens start getting balance right away\n        const trackedIds = getState().tokens.trackedIds\n        if (trackedIds.length) {\n            // load balance for all tracked tokens\n            dispatch(loadMultiTokenBalances(trackedIds, address))\n        }\n    }\n}\n\nexport function changeOwnAddresses(accounts) {\n    // for each account in accounts:\n    // -> if it is not in addresses, add it\n    // -> if it is in addresses, but marked as \"external\", change type to \"owned\"\n    return (dispatch, getState) => {\n        const addressesById = getState().addresses.byId\n\n        const newAccounts = accounts.filter(account => {\n            const existingAddress = Object.values(addressesById).filter(entry => {\n                return (entry.address === account)\n            })\n            if (existingAddress.length > 0) {\n                // check if the type has changed\n                if (existingAddress[0].type !== ADDRESS_TYPE_OWNED){\n                    console.log(\"Changing address \" + existingAddress[0].address + \" type to Owned!\")\n                    dispatch(changeAddressType(existingAddress[0].address, ADDRESS_TYPE_OWNED))\n                }\n                return false // address already known\n            }\n            return true // address needs to be added\n        })\n\n        // now check if there is any address currently marked as owned that is no more in accounts\n        const makeExternal = Object.values(addressesById).filter(entry => {\n            if (entry.type === ADDRESS_TYPE_OWNED) {\n                // if this OWNED address is not in accounts array it needs to change to EXTERNAL!\n                const idx = accounts.indexOf(entry.address)\n                return (idx === -1)\n            }\n            return false\n        })\n\n        // make old owned addresses external\n        makeExternal.forEach(address => {\n            dispatch(changeAddressType(address.address, ADDRESS_TYPE_EXTERNAL))\n        })\n\n        // add all new addresses\n        newAccounts.forEach(account => {\n            dispatch(addNewAddress(account, '', ADDRESS_TYPE_OWNED))\n        })\n    }\n}\n\nexport const CHANGE_SELECTOR_ADDRESSID = 'CHANGE_SELECTOR_ADDRESSID'\nexport function changeSelectorAddressId(selectedAddressId) {\n    return {\n        type: CHANGE_SELECTOR_ADDRESSID,\n        payload: {\n            selectedAddressId,\n        }\n    }\n}\n","import {\n    ADD_ADDRESS, ADDRESS_BALANCES_STATES, CHANGE_ADDRESS_BALANCES_STATE, CHANGE_ADDRESS_TYPE,\n    REMOVE_ADDRESS\n} from '../addressActions'\n\nconst ADDRESS_BY_ID_INITIAL = {}\n\nfunction addAddressEntry(state, action) {\n    const {payload} = action\n    const {addressId, address, ensName, type} = payload\n    if (Object.keys(state).indexOf(addressId) > -1)\n    {\n        console.warn(\"Ignoring duplicate address \" + addressId)\n        return state\n    }\n    return {\n        ...state,\n        [addressId]: {\n            address,\n            ensName,\n            type,\n            balancesState: ADDRESS_BALANCES_STATES.VIRGIN,\n            eventIds: []\n        },\n    }\n}\n\nfunction removeAddressEntry(state, action) {\n    const {payload} = action\n    const {addressId} = payload\n    let newState = Object.assign({}, state)\n    delete newState[addressId]\n    return newState\n}\n\nfunction changeAddressType(state, action) {\n    const {payload} = action\n    const {addressId, newType} = payload\n    const addressEntry = state[addressId]\n    return {\n        ...state,\n        [addressId] : {\n            ...addressEntry,\n            type: newType\n        }\n    }\n}\n\nfunction changeAddressBalancesState(state, action) {\n    const {payload} = action\n    const {addressBalancesState, addressId} = payload\n    const addressEntry = state[addressId]\n    return {\n        ...state,\n        [addressId] : {\n            ...addressEntry,\n            balancesState: addressBalancesState\n        }\n    }\n}\n\nexport const addressByIdReducer = (state=ADDRESS_BY_ID_INITIAL, action) => {\n    switch (action.type) {\n        case ADD_ADDRESS:\n            return addAddressEntry(state, action)\n        case REMOVE_ADDRESS:\n            return removeAddressEntry(state, action)\n        case CHANGE_ADDRESS_TYPE:\n            return changeAddressType(state, action)\n        case CHANGE_ADDRESS_BALANCES_STATE:\n            return changeAddressBalancesState(state, action)\n        default:\n    }\n    return state;\n}\n","import {ADD_ADDRESS, REMOVE_ADDRESS} from '../addressActions'\n\nconst ALL_ADDRESSES_INITIAL = []\n/*const ALL_ADDRESSES_INITIAL = [\n    '0x267be1C1D684F78cb4F6a176C4911b741E4Ffdc0',\n    '0xa38da4974b594204b73581ac5fbc1ebee54ca4e0',\n    '0xc44e4c49ffa5db98ca52770dff3e371ecb01f2d9',\n]*/\n\nfunction addAddressId(state, action) {\n    const {payload} = action\n    const {addressId} = payload\n    // prevent duplicate entries\n    const existingIndex = state.indexOf(addressId)\n    if (existingIndex > -1) {\n        console.warn(\"Ignoring duplicate address \" + addressId)\n        return state\n    }\n    return state.concat(addressId)\n}\n\nfunction removeAddressId(state, action) {\n    const {payload} = action\n    const {addressId} = payload\n    return state.filter(entryId => (entryId !== addressId))\n}\n\nexport const allAddressIdsReducer = (state=ALL_ADDRESSES_INITIAL, action) => {\n    switch (action.type) {\n        case ADD_ADDRESS:\n            return addAddressId(state, action)\n        case REMOVE_ADDRESS:\n            return removeAddressId(state, action)\n        default:\n    }\n    return state;\n}\n","import {CHANGE_SELECTOR_ADDRESSID} from '../addressActions'\n\nconst SELECTOR_INITIAL = {\n    selectedAddressId: '',\n}\n\nfunction changeSelectorAddressId(state, action){\n    const {payload} = action\n    const {selectedAddressId} = payload\n\n    return {\n        ...state,\n        selectedAddressId,\n    }\n}\n\nexport const addressSelectorReducer = (state=SELECTOR_INITIAL, action) => {\n    switch (action.type) {\n        case CHANGE_SELECTOR_ADDRESSID:\n            return changeSelectorAddressId(state, action)\n        default:\n            return state\n    }\n}\n\n","import {addressByIdReducer} from './addressByIdReducer'\nimport {allAddressIdsReducer} from './allAddressIdsReducer'\nimport {combineReducers} from 'redux'\nimport {addressSelectorReducer} from './addressSelectorReducer'\n\n/*\nState tree:\n{\n    addresses: {\n        byId: {\n            '0x267be1C1D684F78cb4F6a176C4911b741E4Ffdc0': {\n                address: '0x267be1C1D684F78cb4F6a176C4911b741E4Ffdc0',\n                ensName: 'validaddress.eth',\n                type: ADDRESS_TYPE_EXTERNAL,\n                balancesState: 'virgin',\n                eventIds: []\n            },\n            ...\n        }\n\n        allIds: [\n            '0x267be1C1D684F78cb4F6a176C4911b741E4Ffdc0',\n            '0xa38da4974b594204b73581ac5fbc1ebee54ca4e0',\n            '0xc44e4c49ffa5db98ca52770dff3e371ecb01f2d9'\n        ]\n    }\n}\n*/\n\nexport const addresses = combineReducers({\n    byId : addressByIdReducer,\n    allIds : allAddressIdsReducer,\n    selector: addressSelectorReducer,\n});\n","import {\n    BALANCE_STATES,\n    CREATE_BALANCE_ENTRY,\n    DELETE_BALANCE_ENTRY,\n    SET_BALANCE,\n    SET_BALANCE_STATE\n} from '../balanceActions'\nimport {CLEAR_TOKEN_LIST} from '../../token/tokenActions'\nimport {BigNumber} from 'bignumber.js'\n\nconst BALANCE_BY_ID_INITIAL = {}\n\nfunction clearAllBalances() {\n    return BALANCE_BY_ID_INITIAL;\n}\n\nfunction setBalance(state, action) {\n    const {payload} = action\n    const {balanceId, balance} = payload\n    const balanceEntry = state[balanceId]\n    return {\n        ...state,\n        [balanceId] : {\n            ...balanceEntry,\n            balance\n        }\n    };\n}\n\nfunction createBalanceEntry(state, action) {\n    const {payload} = action\n    const {balanceId, addressId, tokenId} = payload\n    return {\n        ...state,\n        [balanceId] : {\n            balanceId,\n            addressId,\n            tokenId,\n            balance: new BigNumber(0),\n            balanceState: BALANCE_STATES.VIRGIN,\n        }\n    }\n}\n\nfunction balanceStateChanged(state, action){\n    const {payload} = action\n    const {balanceId, balanceState} = payload\n    const balanceEntry = state[balanceId]\n    return {\n        ...state,\n        [balanceId] : {\n            ...balanceEntry,\n            balanceState,\n        }\n    }\n\n}\n\nfunction deleteBalanceEntry(state, action) {\n    const {payload} = action\n    const {balanceId} = payload\n    delete state[balanceId]\n    return state\n}\n\n\nexport const byId = (state=BALANCE_BY_ID_INITIAL, action) => {\n    switch (action.type) {\n        case CREATE_BALANCE_ENTRY: {\n            return createBalanceEntry(state, action)\n        }\n        case SET_BALANCE: {\n            return setBalance(state, action)\n        }\n        case SET_BALANCE_STATE: {\n            return balanceStateChanged(state, action)\n        }\n        case DELETE_BALANCE_ENTRY: {\n            return deleteBalanceEntry(state, action)\n        }\n        case CLEAR_TOKEN_LIST: {\n            return clearAllBalances()\n        }\n        default:\n            return state;\n    }\n}\n","import {CREATE_BALANCE_ENTRY, DELETE_BALANCE_ENTRY} from '../balanceActions'\nimport {CLEAR_TOKEN_LIST} from '../../token/tokenActions'\n\nconst ALL_BALANCES_INITIAL = []\n\nfunction clearAllBalances() {\n    return ALL_BALANCES_INITIAL;\n}\n\nfunction createBalanceEntry(state, action) {\n    const {payload} = action\n    const {balanceId} = payload\n    // prevent duplicate entries\n    const existingIndex = state.indexOf(balanceId)\n    if (existingIndex > -1) {\n        console.warn(\"Ignoring duplicate balance \" + balanceId)\n        return state\n    }\n    return state.concat(balanceId)\n}\n\nfunction deleteBalanceEntry(state, action) {\n    const {payload} = action\n    const {balanceId} = payload\n    const index = state.indexOf(balanceId)\n    if (index > -1){\n        state.splice(index, 1)\n        return state\n    }\n    return state\n}\n\n\nexport const allIds = (state=ALL_BALANCES_INITIAL, action) => {\n    switch (action.type) {\n        case CREATE_BALANCE_ENTRY: {\n            return createBalanceEntry(state, action)\n        }\n        case DELETE_BALANCE_ENTRY: {\n            return deleteBalanceEntry(state, action)\n        }\n        case CLEAR_TOKEN_LIST: {\n            return clearAllBalances()\n        }\n        default:\n            return state\n    }\n}\n","import {DELETE_BALANCE_ENTRY, SET_BALANCE} from '../balanceActions'\nimport {CLEAR_TOKEN_LIST} from '../../token/tokenActions'\n\nconst POSITIVE_BALANCES_INITIAL = []\n\nfunction clearPositiveBalances() {\n    return POSITIVE_BALANCES_INITIAL\n}\n\nfunction setBalance(state, action) {\n    const {payload} = action\n    const {balanceId, balance} = payload\n    const index = state.indexOf(balanceId)\n    if (index > -1) {\n        // this balance entry is currently marked as having a balance...\n        if (balance.isZero()) {\n            // no more balance. Remove from array\n            const newState = state.filter(entry => entry !== balanceId)\n            return newState\n        } else {\n            // all set, no need for action\n            return state\n        }\n    } else {\n        // this balance entry is currently marked as having NO balance...\n        if (balance.greaterThan(0)) {\n            // ... but it has a balance now! Add it to list.\n            return state.concat(balanceId)\n        } else {\n            // ... and it still has no balance. No need for action\n            return state\n        }\n    }\n}\n\nfunction deleteBalanceEntry(state, action) {\n    const {payload} = action\n    const {balanceId} = payload\n    const index = state.indexOf(balanceId)\n    if (index > -1){\n        state.splice(index, 1)\n        return state\n    }\n    return state\n}\n\nexport const positiveIds = (state=POSITIVE_BALANCES_INITIAL, action) => {\n    switch (action.type) {\n        case SET_BALANCE: {\n            return setBalance(state, action)\n        }\n        case DELETE_BALANCE_ENTRY: {\n            return deleteBalanceEntry(state, action)\n        }\n        case CLEAR_TOKEN_LIST:\n            return clearPositiveBalances()\n        default:\n            return state;\n    }\n}\n","import {\n    CHANGE_BALANCE_FILTER_PROPS,\n} from '../balanceActions'\nimport {CLEAR_TOKEN_LIST} from '../../token/tokenActions'\n\nconst BALANCE_LISTSTATE_INITIAL = {\n    filter: '',\n    matchedBalanceIds: [],\n    displayCount: 10,\n}\n\nfunction clearBalanceListState() {\n    return BALANCE_LISTSTATE_INITIAL\n}\n\nfunction changeBalanceFilterProps(state, action){\n    const {payload} = action\n    const {filter, matchedBalanceIds} = payload\n    return {\n        ...state,\n        filter,\n        matchedBalanceIds\n    }\n}\n\nexport const listStateReducer = (state=BALANCE_LISTSTATE_INITIAL, action) => {\n    switch (action.type) {\n        case CHANGE_BALANCE_FILTER_PROPS:\n            return changeBalanceFilterProps(state, action)\n        case CLEAR_TOKEN_LIST:\n            return clearBalanceListState()\n        default:\n            return state\n    }\n}\n\n","import {combineReducers} from \"redux\"\nimport {byId} from './balanceByIdReducer'\nimport {allIds} from './allBalancesReducer'\nimport {positiveIds} from './positiveBalancesReducer'\nimport {listStateReducer} from './BalanceListStateReducer'\n\n/*\nState tree:\n{\n    balance: {\n        byId: {\n            [1]: {\n                balanceId: 1\n                tokenId: 1\n                addressId: 1\n                balance: 22.45\n            },\n        }\n        allIds: [1],\n        positiveIds: [1]    // all balances that have an actual balance > 0\n        listState: {\n            filter: '',\n            matchedBalanceIds: [],\n            displayCount: 10,\n        }\n    }\n}\n*/\n\nexport const balance = combineReducers({\n    byId : byId,\n    allIds : allIds,\n    positiveIds: positiveIds,\n    listState: listStateReducer,\n})\n","import {ADD_EVENTS, buildEventId} from '../eventActions'\nimport {CLEAR_TOKEN_LIST} from '../../token/tokenActions'\n\nconst EVENT_BY_ID_INITIAL = {}\n\nfunction addEvents(state, action) {\n    const {payload} = action\n    const {events, tokenId} = payload\n    events.forEach(transferEvent => {\n        const transferEventId = buildEventId(transferEvent)\n        // prevent duplicate entries\n        if (Object.keys(state).includes(transferEventId ))\n        {\n            console.warn(\"Ignoring duplicate event \" + transferEventId )\n            return\n        }\n        state = {\n            ...state,\n            [transferEventId]: {\n                transferEventId,\n                tokenId,\n                transferEvent,\n            },\n        }\n    })\n    return state\n}\n\nfunction clearEvents() {\n    return EVENT_BY_ID_INITIAL\n}\n\nexport const eventByIdReducer = (state=EVENT_BY_ID_INITIAL, action) => {\n    switch (action.type) {\n        case ADD_EVENTS:\n            return addEvents(state, action)\n        case CLEAR_TOKEN_LIST:\n            return clearEvents()\n        default:\n    }\n    return state;\n}\n","import {ADD_EVENTS, buildEventId} from '../eventActions'\nimport {CLEAR_TOKEN_LIST} from '../../token/tokenActions'\n\nconst ALL_EVENTS_INITIAL = []\n\nfunction addEventIds(state, action) {\n    const {payload} = action\n    const {events} = payload\n    let newState = state\n    events.forEach(transferEvent => {\n        const transferEventId = buildEventId(transferEvent)\n        // prevent duplicate entries\n        const existingIndex = state.indexOf(transferEventId)\n        if (existingIndex > -1) {\n            console.warn(\"Ignoring duplicate event \" + transferEventId)\n            return\n        }\n        newState = newState.concat(transferEventId)\n    })\n    return newState\n}\n\nfunction clearEvents() {\n    return ALL_EVENTS_INITIAL\n}\n\nexport const allEventIdsReducer = (state=ALL_EVENTS_INITIAL, action) => {\n    switch (action.type) {\n        case ADD_EVENTS:\n            return addEventIds(state, action)\n        case CLEAR_TOKEN_LIST:\n            return clearEvents()\n        default:\n    }\n    return state;\n}\n","import {CHANGE_EVENT_SCAN_PROPS, CHANGE_TRANSFEREVENTLIST_PAGE} from '../eventActions'\nimport {CHANGE_SELECTOR_ADDRESSID} from '../../address/addressActions'\nimport {CHANGE_SELECTOR_TOKENID, CLEAR_TOKEN_LIST} from '../../token/tokenActions'\n\nconst LISTSTATE_INITIAL = {\n    activePage: 1,\n    currentChunk: 0,\n    maxChunks: 0,\n}\n\nfunction transferEventListPageChanged(state, action)  {\n    const {payload} = action\n    const {activePage} = payload\n    return {\n        ...state,\n        activePage,\n    }\n}\n\nfunction resetPager(state) {\n    return {\n        ...state,\n        activePage: 1\n    }\n}\n\nfunction changeEventScanProps(state, action) {\n    const {payload} = action\n    const {\n        currentChunk,\n        maxChunks,\n    } = payload.props\n\n    return {\n        ...state,\n        currentChunk,\n        maxChunks\n    }\n}\n\nexport const transferEventListStateReducer = (state=LISTSTATE_INITIAL, action) => {\n    switch(action.type) {\n        case CHANGE_TRANSFEREVENTLIST_PAGE:\n            return transferEventListPageChanged(state, action)\n        case CHANGE_EVENT_SCAN_PROPS:\n            return changeEventScanProps(state, action)\n        case CHANGE_SELECTOR_ADDRESSID:\n        case CHANGE_SELECTOR_TOKENID:\n        case CLEAR_TOKEN_LIST:\n            return resetPager(state, action)\n        default:\n            return state\n    }\n}\n","import {combineReducers} from 'redux'\nimport {eventByIdReducer} from './eventByIdReducer'\nimport {allEventIdsReducer} from './allEventIdsReducer'\nimport {addressContractEventsByIdReducer} from './addressContractEventsByIdReducer'\nimport {transferEventListStateReducer} from './listStateReducer'\n\n\nexport const events = combineReducers({\n    byId : eventByIdReducer,\n    allIds : allEventIdsReducer,\n    aceById: addressContractEventsByIdReducer,\n    listState: transferEventListStateReducer,\n});\n","export const SHOW_MODAL = 'SHOW_MODAL'\nexport function showModal(modalType, modalProps) {\n    return {\n        type: SHOW_MODAL,\n        payload: {\n            modalType,\n            modalProps\n        }\n    }\n}\n\nexport const HIDE_MODAL = 'HIDE_MODAL'\nexport function hideModal() {\n    return {\n        type: HIDE_MODAL,\n        payload: {}\n    }\n}\n","import {HIDE_MODAL, SHOW_MODAL} from './modalActions'\n\nconst MODAL_INITIAL = {\n    modalType: null,\n    modalProps: {}\n}\n\nfunction showModal(state, action) {\n    const {payload} = action\n    const {modalType, modalProps} = payload\n    return {\n        modalType,\n        modalProps\n    }\n}\n\nfunction hideModal() {\n    return MODAL_INITIAL\n}\n\nexport const modal = (state=MODAL_INITIAL, action) => {\n    switch (action.type) {\n        case SHOW_MODAL:\n            return showModal(state, action)\n        case HIDE_MODAL:\n            return hideModal()\n        default:\n    }\n    return state;\n}\n","import {createStore, combineReducers, applyMiddleware, compose} from 'redux'\nimport {tokens} from \"./modules/token/reducers/tokenReducer\"\nimport {web3Instance} from \"./modules/web3/web3Reducer\"\nimport thunk from 'redux-thunk'\nimport {addresses} from './modules/address/reducers/addressReducer'\nimport {balance} from './modules/balance/reducer/balanceReducer'\nimport {createLogger} from 'redux-logger'\nimport {events} from './modules/event/reducers/eventReducer'\nimport {modal} from './modules/modal/modalReducer'\n\n\nconst reducer = combineReducers({\n    web3Instance,\n    tokens,\n    addresses,\n    balance,\n    events,\n    modal,\n})\n\nconst logger = createLogger({\n    // Would love to log state diffs, but apparently logger tries to call all web3 instance methods\n    // which will make metamask throw an error due to trying to call methods synchronous.\n    // There may be a workaround somewhere, but disabling state diff for now...\n    diff: false\n});\n\n// REDUX Dev Tools don't play well at all with web3 from Metamask extension...\n// const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst composeEnhancers = compose;\n\nexport default () => {\n    let store = createStore(\n        reducer,\n        composeEnhancers(\n            applyMiddleware(\n                thunk,\n                logger,\n            )\n        )\n    )\n    return {store}\n}\n\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Header, Modal} from 'semantic-ui-react'\n\nconst TestModal = (props) => {\n    const {closeModal} = props\n    return (\n        <Modal open onClose={closeModal}>\n            <Modal.Header>Select a Photo</Modal.Header>\n            <Modal.Content>\n                <Modal.Description>\n                    <Header>Default Profile Image</Header>\n                    <p>We've found the following gravatar image associated with your e-mail address.</p>\n                    <p>Is it okay to use this photo?</p>\n                </Modal.Description>\n            </Modal.Content>\n        </Modal>\n    )\n}\n\nTestModal.propTypes = {\n    closeModal: PropTypes.func.isRequired\n}\n\nTestModal.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nexport default TestModal\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {addValidationRule} from 'formsy-react'\nimport {Grid, Header, List, Modal, Segment} from 'semantic-ui-react'\nimport {Label} from 'semantic-ui-react'\nimport {Form, Input} from 'formsy-semantic-ui-react'\n\nconst TransferForm = (props) => {\n    const {\n        web3, onValidSubmit, onClose,\n        fromAddress,\n        tokenName, tokenSymbol, tokenBalance,\n        etherBalance, gasCosts } = props\n\n    const errorLabel = <Label color=\"red\" pointing/>\n\n    addValidationRule('isEthereumAddress', (values, value) => (web3.isAddress(value)))\n    addValidationRule('isLessThanOrEqual', (values, value, max) => {\n        try {\n            const bnValue = web3.toBigNumber(value)\n            const bnMax = web3.toBigNumber(max)\n            return bnValue.lessThanOrEqualTo(bnMax)\n        }\n        catch (err) {\n            // if anything goes wrong with BigNumber, just fail validation\n            return false\n        }\n    })\n\n    return (\n        <Modal open onClose={onClose} size={'small'} closeIcon>\n            <Modal.Header>Transfer '{tokenName}' Tokens</Modal.Header>\n            <Modal.Content>\n\n                <Form noValidate onValidSubmit={onValidSubmit}>\n                    <Segment>\n                        <Grid columns={2}>\n                            <Grid.Row>\n                                <Grid.Column width={4}>\n                                    <strong>Account address:</strong>\n                                </Grid.Column>\n                                <Grid.Column width={5}>{fromAddress}</Grid.Column>\n                            </Grid.Row>\n                            <Grid.Row>\n                                <Grid.Column width={4}>\n                                    <strong>Account balance:</strong>\n                                </Grid.Column>\n                                <Grid.Column width={5}>\n                                    <List>\n                                        <List.Item>\n                                            {tokenBalance.toFixed()} {tokenSymbol}\n                                        </List.Item>\n                                        <List.Item>{etherBalance.toFixed()} ETH</List.Item>\n                                    </List>\n                                </Grid.Column>\n                            </Grid.Row>\n                        </Grid>\n                    </Segment>\n\n                    <Segment>\n                        <Header size=\"small\">To Address</Header>\n                        <Form.Group>\n                            <Input width={6}\n                                   name=\"toAddress\"\n                                   placeholder=\"Receiving ethereum address\"\n                                   required\n                                   instantValidation\n                                   validations=\"isEthereumAddress\"\n                                   validationErrors={{\n                                       isEthereumAddress: 'This is not a valid Ethereum address',\n                                       isDefaultRequiredValue: 'To Address is Required',\n                                   }}\n                                   errorLabel={errorLabel}\n                            />\n                        </Form.Group>\n\n                        <Header size=\"small\">Amount to send</Header>\n                        <Form.Group>\n                            <Input width={6}\n                                   name=\"amount\"\n                                   placeholder=\"Enter amount\"\n                                   label={tokenSymbol}\n                                   labelPosition=\"right\"\n                                   required\n                                   instantValidation\n                                   validations={'isNumeric,isLessThanOrEqual:' + tokenBalance.toFixed()}\n                                   validationErrors={{\n                                       isNumeric: 'This is not a valid number',\n                                       isDefaultRequiredValue: 'Amount is Required',\n                                       isLessThanOrEqual: 'Maximum available balance is ' + tokenBalance.toFixed()\n                                   }}\n                                   errorLabel={errorLabel}\n                            />\n                        </Form.Group>\n                    </Segment>\n\n                    <Segment>\n                        <Header size=\"small\">Estimated Gas costs</Header>\n                        <Form.Group>\n                            <Input width={6}\n                                   name=\"gasCosts\"\n                                   label=\"ETH\"\n                                   labelPosition=\"right\"\n                                   readOnly\n                                   value={gasCosts}\n                                   validations={'isLessThanOrEqual:' + etherBalance.toFixed()}\n                                   instantValidation\n                                   validationErrors={{\n                                       isLessThanOrEqual: 'Not enough ether to cover gas costs'\n                                   }}\n                                   errorLabel={errorLabel}\n                            />\n                        </Form.Group>\n                    </Segment>\n                    <Form.Group>\n                        <Form.Button content=\"Submit\" color=\"green\"/>\n                    </Form.Group>\n\n                </Form>\n\n            </Modal.Content>\n        </Modal>\n    )\n}\n\nTransferForm.propTypes = {\n    web3: PropTypes.object.isRequired\n}\n\nTransferForm.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nexport default TransferForm\n","import React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport TransferForm from './TransferForm'\nimport {connect} from 'react-redux'\nimport {transferToken} from '../../token/tokenActions'\n\nclass TransferFormContainer extends Component {\n    constructor(props, context) {\n        super(props, context)\n        this.state = {\n            amount: this.props.web3.toBigNumber('0'),\n            toAddressValid: false,\n            amountValid: false,\n            rateValid: false\n        }\n    }\n\n    onValidSubmit = (formData) => alert(JSON.stringify(formData));   // eslint-disable-line\n\n    render() {\n        const {fromAddress, tokenName, tokenSymbol, tokenBalance} = this.props\n\n        // TODO: Calculate real gas costs\n        const gasCosts = this.props.web3.toBigNumber('0.0022')\n        // TODO: Get real balance\n        const etherBalance = this.props.web3.toBigNumber('12.3456')\n\n        return <TransferForm onValidSubmit={this.onValidSubmit}\n                             onClose={this.props.closeModal}\n                             fromAddress={fromAddress}\n                             web3={this.props.web3}\n                             tokenName={tokenName}\n                             tokenSymbol={tokenSymbol}\n                             tokenBalance={tokenBalance}\n                             gasCosts={gasCosts}\n                             etherBalance={etherBalance}\n        />\n    }\n}\n\nTransferFormContainer.propTypes = {\n    fromAddress: PropTypes.string.isRequired,\n    tokenName: PropTypes.string.isRequired,\n    tokenSymbol: PropTypes.string.isRequired,\n    tokenId: PropTypes.number.isRequired,\n    tokenBalanceId: PropTypes.number.isRequired,\n    tokenBalance: PropTypes.object.isRequired,\n}\n\nTransferFormContainer.defaultProps = {\n}\n\nconst mapStateToProps = (state, ownProps) => {\n    const balanceEntry = state.balance.byId[ownProps.tokenBalanceId]\n    const fromAddress = state.addresses.byId[balanceEntry.addressId].address\n    const token = state.tokens.byId[balanceEntry.tokenId]\n    const tokenBalance = balanceEntry.balance.dividedBy(token.decimals)\n\n    return {\n        web3: state.web3Instance.web3,\n        fromAddress,\n        tokenBalance,\n        tokenName: token.name,\n        tokenSymbol: token.symbol,\n        tokenId: token.id,\n    }\n}\n\nconst mapDispatchToProps = dispatch => ({\n    transferToken: () => {\n        dispatch(transferToken())\n    },\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TransferFormContainer)\n","import React, {Component} from 'react'\nimport {connect} from 'react-redux'\nimport TestModal from './TestModal'\nimport {hideModal} from './modalActions'\nimport TransferFormContainer from '../forms/transferForm/TransferFormContainer'\n\nexport const MODAL_COMPONENTS = {\n    'TEST_MODAL': TestModal,\n    'TRANSFER_FORM_CONTAINER': TransferFormContainer\n    /* other modals */\n}\n\nclass ModalRoot extends Component {\n    render() {\n        const {modalType, modalProps, closeModal} = this.props\n\n        if (!modalType){\n            // currently no modal needs to be shown\n            return null\n        }\n\n        const SpecificModal = MODAL_COMPONENTS[modalType]\n        return <SpecificModal closeModal={closeModal} {...modalProps} />\n    }\n}\n\nconst mapStateToProps = state => (\n    state.modal\n)\n\nconst mapDispatchToProps = (dispatch) => ({\n    closeModal: () => {\n        dispatch(hideModal())\n    }\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModalRoot)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Input, Icon} from 'semantic-ui-react'\n\nconst TokenListFilter = (props) => {\n    const {filterString, handleChange, filterIsActive, clearFilter} = props\n    let icon = null\n    if (filterIsActive) {\n        icon = <Icon name='eraser' circular link onClick={clearFilter} />\n    }\n    return (\n        <Input label='Filter'\n               name='filter'\n               placeholder='Enter name, symbol or contract address'\n               onChange={handleChange}\n               value={filterString}\n               icon={icon}\n               fluid\n        />\n    )\n}\n\nTokenListFilter.propTypes = {\n    filterString: PropTypes.string.isRequired,\n    handleChange: PropTypes.func.isRequired,\n    filterIsActive: PropTypes.bool.isRequired,\n    displayed: PropTypes.number.isRequired,\n    total: PropTypes.number.isRequired,\n    clearFilter: PropTypes.func.isRequired,\n}\n\nTokenListFilter.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nexport default TokenListFilter\n","import React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport {connect} from 'react-redux'\nimport {setFilterProps} from './tokenActions'\nimport TokenListFilter from './TokenListFilter'\nimport {setBalanceFilterString} from '../balance/balanceActions'\n\nclass TokenListFilterContainer extends Component {\n    constructor(props, context) {\n        super(props, context)\n        this.handleChange = this.handleChange.bind(this)\n    }\n\n    handleChange(e, {name, value}) {\n        this.props.setFilterString(value)\n    }\n\n    render() {\n        return <TokenListFilter filterString={this.props.filterString}\n                                handleChange={this.handleChange}\n                                filterIsActive={this.props.filterIsActive}\n                                displayed={this.props.displayed}\n                                total={this.props.total}\n                                clearFilter={this.props.clearFilter}/>\n    }\n}\n\nTokenListFilterContainer.propTypes = {\n    target: PropTypes.string.isRequired,\n    total: PropTypes.number.isRequired,\n    displayed: PropTypes.number.isRequired,\n    clearFilter: PropTypes.func.isRequired,\n    filterIsActive: PropTypes.bool.isRequired,\n    filterString: PropTypes.string.isRequired,\n}\n\nconst mapStateToProps = (state, ownProps) => {\n    const {target} = ownProps\n\n    if (target === 'tokenlist') {\n        return {\n            total: state.tokens.allIds.length,\n            displayed: state.tokens.listState.matchedTokenIds.length,\n            filterIsActive: state.tokens.listState.filterIsActive,\n            filterString: state.tokens.listState.filter,\n            showOnlyTracked: state.tokens.listState.showOnlyTracked,\n        }\n    }\n    if (target === 'balancelist') {\n        return {\n            total: state.balance.allIds.length,\n            displayed: state.balance.listState.matchedBalanceIds.length,\n            filterIsActive: state.balance.listState.filter.length > 0,\n            filterString: state.balance.listState.filter,\n        }\n    }\n\n    return {}\n}\n\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n    const {target} = ownProps\n\n    if (target === 'tokenlist') {\n        return {\n            clearFilter: () => {\n                dispatch(setFilterProps({filterString: ''}))\n            },\n            setFilterString: (filter) => {\n                dispatch(setFilterProps({filterString: filter}))\n            }\n        }\n    }\n\n    if (target === 'balancelist') {\n        return {\n            clearFilter: () => {\n                dispatch(setBalanceFilterString(''))\n            },\n            setFilterString: (filter) => {\n                dispatch(setBalanceFilterString(filter))\n            }\n        }\n    }\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TokenListFilterContainer)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Header} from 'semantic-ui-react'\n\nconst ScreenHeader = (props) => {\n    const {title} = props\n    /*\n     custom style \"marginTop: 0\" required to prevent header sticking just a little bit outside of its grid row.\n     Not sure if this is an error on my side, a bug of react-semantic-ui or semantic-ui itself, or intended behaviour...\n     */\n    return (\n        <Header as={'h1'} block inverted color={'green'} textAlign={'center'}\n                style={{\n                    marginTop: 0,\n                }}>\n            {title}\n        </Header>\n    )\n}\n\nScreenHeader.propTypes = {\n    //myProp: PropTypes.object.isRequired\n    title: PropTypes.string.isRequired\n}\n\nScreenHeader.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nexport default ScreenHeader\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Popup} from 'semantic-ui-react'\n\n\nconst Balance = (props) => {\n    const {balance, numDecimals} = props\n    const trigger = <span>{balance.toFixed(numDecimals)}</span>\n    return (\n        <Popup\n            trigger={trigger}\n            content={balance.toFixed(Math.max(numDecimals, balance.dp()))}\n        />\n    )\n}\n\nBalance.propTypes = {\n    balance: PropTypes.object.isRequired, // BigNum instance\n    numDecimals: PropTypes.number\n}\n\nBalance.defaultProps = {\n    numDecimals: 3\n}\n\nexport default Balance\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst AddressDisplay = (props) => {\n    const {address, ensName} = props\n    if (ensName) {\n        return <div>\n            <div><strong>{ensName}</strong></div>\n            <div><small>{address}</small></div>\n        </div>\n    } else {\n        return <div><strong>{address}</strong></div>\n    }\n}\n\nAddressDisplay.propTypes = {\n    address: PropTypes.string.isRequired,\n    ensName: PropTypes.string\n}\n\n\nexport default AddressDisplay\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Table, Button} from 'semantic-ui-react'\nimport {Link} from 'react-router-dom'\nimport Balance from './Balance'\nimport {ADDRESS_TYPE_EXTERNAL, ADDRESS_TYPE_OWNED} from '../address/addressActions'\nimport AddressDisplay from '../common/AddressDisplay'\n\nconst BalanceItemDetail = (props) => {\n    const {address, ensName, balance, loading, reloadBalance, url/*, addressType, openTransferModal*/} = props\n    /*const external = (addressType !== ADDRESS_TYPE_OWNED)*/\n\n    /*\n        transfer button removed until functionality gets implemented...\n\n                <Button icon='external share'\n                    size='mini'\n                    circular\n                    onClick={openTransferModal}\n                    disabled={external}\n                />\n     */\n\n    return (\n        <Table.Row>\n            <Table.Cell>\n            </Table.Cell>\n            <Table.Cell>\n                <Link to={url}><AddressDisplay address={address} ensName={ensName}/></Link>\n            </Table.Cell>\n            <Table.Cell><Balance balance={balance}/></Table.Cell>\n            <Table.Cell>\n                <Button size='mini'\n                        circular\n                        icon='refresh'\n                        loading={loading}\n                        onClick={reloadBalance} />\n            </Table.Cell>\n        </Table.Row>\n    )\n}\n\nBalanceItemDetail.propTypes = {\n    address: PropTypes.string.isRequired,\n    addressType: PropTypes.oneOf([ADDRESS_TYPE_OWNED, ADDRESS_TYPE_EXTERNAL]).isRequired,\n    ensName: PropTypes.string,\n    balance: PropTypes.object.isRequired,\n    loading: PropTypes.bool.isRequired,\n    url: PropTypes.string.isRequired,\n    openTransferModal: PropTypes.func.isRequired,\n    reloadBalance: PropTypes.func.isRequired,\n}\n\nBalanceItemDetail.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nexport default BalanceItemDetail\n","import React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport BalanceItemDetail from './BalanceItemDetail'\nimport {connect} from 'react-redux'\nimport {BALANCE_STATES, reloadBalance} from './balanceActions'\nimport {showModal} from '../modal/modalActions'\n\nclass BalanceItemDetailContainer extends Component {\n    render() {\n        return (\n            <BalanceItemDetail address={this.props.address}\n                               addressType={this.props.addressType}\n                               balance={this.props.balance}\n                               reloadBalance={this.props.reloadBalance}\n                               loading={this.props.loading}\n                               url={this.props.url}\n                               openTransferModal={this.props.openTransferModal}\n                               ensName={this.props.ensName}\n            />\n        )\n    }\n}\n\nBalanceItemDetailContainer.propTypes = {\n    address: PropTypes.string.isRequired,\n    balance: PropTypes.object.isRequired,\n    tokenBalanceId: PropTypes.string.isRequired,\n    loading: PropTypes.bool.isRequired,\n    reloadBalance: PropTypes.func.isRequired,\n    openTransferModal: PropTypes.func.isRequired,\n}\n\nBalanceItemDetailContainer.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nconst mapStateToProps = (state, ownProps) => {\n    const balanceEntry = state.balance.byId[ownProps.tokenBalanceId]\n    const token = state.tokens.byId[balanceEntry.tokenId]\n    const addressEntry = state.addresses.byId[balanceEntry.addressId]\n    const balance = balanceEntry.balance.dividedBy(token.decimals)\n    return {\n        balance,\n        address: addressEntry.address,\n        addressType: addressEntry.type,\n        ensName: addressEntry.ensName,\n        loading: balanceEntry.balanceState===BALANCE_STATES.LOADING,\n        url: \"/events/\" + token.id + \"/\" + addressEntry.address\n    }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n    reloadBalance: () => {\n        dispatch(reloadBalance(ownProps.tokenBalanceId))\n    },\n    openTransferModal: () => {\n        dispatch(showModal('TRANSFER_FORM_CONTAINER',\n            {\n                tokenBalanceId: ownProps.tokenBalanceId,\n            }\n        ))\n    }\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BalanceItemDetailContainer)\n\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Button, Statistic, Table} from 'semantic-ui-react'\nimport BalanceItemDetailContainer from './BalanceItemDetailContainer'\nimport {Link} from 'react-router-dom'\nimport Balance from './Balance'\n\nconst BalanceItem = (props) => {\n    const {expanded, tokenName, tokenSymbol, tokenBalances, total, reloadBalance, loading, tokenEventsLinkOptions, toggleCollapse} = props\n    let eventLink = <Link to={tokenEventsLinkOptions}>{tokenName} ({tokenSymbol})</Link>\n\n    const icon = expanded ? 'chevron up' : 'chevron down'\n\n    const tableHeader = (\n        <Table.Header>\n            <Table.Row>\n                <Table.HeaderCell width={1}>\n                    <Button onClick={toggleCollapse}\n                            circular\n                            icon={icon}\n                            size={'large'}\n                    />\n                </Table.HeaderCell>\n                <Table.HeaderCell width={8}>{eventLink}</Table.HeaderCell>\n                <Table.HeaderCell width={5}>\n                    <Statistic size='mini'>\n                        <Statistic.Value><Balance balance={total}/></Statistic.Value>\n                    </Statistic>\n                </Table.HeaderCell>\n                <Table.HeaderCell width={2}>\n                    <Button circular\n                            icon='refresh'\n                            onClick={reloadBalance}\n                            loading={loading}/>\n                </Table.HeaderCell>\n            </Table.Row>\n        </Table.Header>\n    )\n\n    let tableBody\n    if (expanded) {\n        tableBody = (\n            <Table.Body>\n                {tokenBalances.map(tokenBalance =>\n                    <BalanceItemDetailContainer key={tokenBalance.balanceId}\n                                                tokenBalanceId={tokenBalance.balanceId}\n                    />\n                )}\n            </Table.Body>\n        )\n    } else {\n        tableBody = null\n    }\n\n    return <Table compact>\n        {tableHeader}\n        {tableBody}\n    </Table>\n}\n\nBalanceItem.propTypes = {\n    tokenName: PropTypes.string.isRequired,\n    tokenSymbol: PropTypes.string.isRequired,\n    tokenBalances: PropTypes.array.isRequired,\n    total: PropTypes.object.isRequired,\n    reloadBalance: PropTypes.func.isRequired,\n    toggleCollapse: PropTypes.func.isRequired,\n    loading: PropTypes.bool.isRequired,\n    tokenEventsLinkOptions: PropTypes.object.isRequired,\n    expanded: PropTypes.bool.isRequired,\n}\n\nBalanceItem.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nexport default BalanceItem\n","import React, {Component} from 'react'\nimport {connect} from 'react-redux'\nimport BigNumber from 'bignumber.js'\nimport {BALANCE_STATES, reloadBalance} from './balanceActions'\nimport BalanceItem from './BalanceItem'\nimport _ from 'lodash'\n\n\nclass BalanceItemContainer extends Component {\n    constructor(props, context) {\n        super(props, context)\n        this.reloadBalance = this.reloadBalance.bind(this)\n        this.toggleCollapse = this.toggleCollapse.bind(this)\n        this.state = {\n            expanded: false\n        }\n    }\n\n    reloadBalance() {\n        this.props.tokenBalances.forEach(tokenBalance => {\n            this.props.reloadBalance(tokenBalance.balanceId)\n        })\n    }\n\n    toggleCollapse() {\n        this.setState({ expanded: !this.state.expanded })\n    }\n\n    render() {\n        return (\n            <BalanceItem tokenName={this.props.token.name}\n                         tokenSymbol={this.props.token.symbol}\n                         tokenBalances={this.props.tokenBalances}\n                         total={this.props.total}\n                         reloadBalance={this.reloadBalance}\n                         loading={this.props.loading}\n                         tokenEventsLinkOptions={this.props.tokenEventsLinkOptions}\n                         expanded={this.state.expanded}\n                         toggleCollapse={this.toggleCollapse}\n            />\n        )\n    }\n\n    /*\n    shouldComponentUpdate(nextProps) {\n        // Render() should only ever be necessary when loading state, token itself or\n        // it's total balance changes, i.e. an address was added/removed to\n        // the watch list or the balance of an address changed.\n        return (\n            (!nextProps.total.equals(this.props.total)) ||\n            (nextProps.tokenId !== this.props.tokenId) ||\n            (nextProps.loading !== this.props.loading)\n        )\n    }*/\n}\n\nBalanceItemContainer.propTypes = {\n}\n\nBalanceItemContainer.defaultProps = {\n   //myProp: <defaultValue>\n}\n\nconst mapStateToProps = (state, ownProps) => {\n    const token = state.tokens.byId[ownProps.tokenId]\n\n    // calculate total balance of all addresses\n    const total = _.reduce(ownProps.tokenBalances, (sum, tokenBalance) => {\n        return sum.plus(tokenBalance.balance)\n    }, new BigNumber(0) ).dividedBy(token.decimals)\n\n    // if any of the tokenBalances is loading, the whole container is loading\n    let loading = false\n    ownProps.tokenBalances.forEach(tokenBalance => {\n        if (tokenBalance.balanceState === BALANCE_STATES.LOADING)\n            loading = true\n    })\n\n    const tokenEventsLinkOptions = {\n        pathname: '/events/' + ownProps.tokenId,\n    }\n\n    return {\n        token,\n        total,\n        loading,\n        tokenEventsLinkOptions,\n    }\n}\n\nconst mapDispatchToProps = dispatch => ({\n    reloadBalance: (balanceId) => {\n        dispatch(reloadBalance(balanceId))\n    },\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BalanceItemContainer)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport BalanceItemContainer from './BalanceItemContainer'\n\nconst BalancesList = (props) => {\n    return (\n        <div>\n            {Object.entries(props.balancesByToken).map(entry =>\n                <BalanceItemContainer key={entry[0]} tokenId={entry[0]} tokenBalances={entry[1]}/>\n            )}\n        </div>\n    )\n}\n\nBalancesList.propTypes = {\n    balancesByToken: PropTypes.object.isRequired\n}\n\nBalancesList.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nexport default BalancesList\n","\nimport PropTypes from \"prop-types\"\nimport {connect} from \"react-redux\"\nimport React, {Component} from \"react\"\nimport {groupBy} from \"lodash\"\nimport BalancesList from \"../balance/BalancesList\"\nimport {Message} from \"semantic-ui-react\"\nimport {Link} from \"react-router-dom\"\n\nclass OverviewBodyContainer extends Component {\n    render() {\n        const {balancesByToken, hideEmpty} = this.props\n        let body\n        if (Object.keys(balancesByToken).length) {\n            body = <BalancesList balancesByToken={balancesByToken}/>\n        }\n        else {\n            body = <Message>\n                <Message.Header>\n                    No balances\n                </Message.Header>\n                <Message.Content>\n                    There are no token balances to display. Things you can try:\n                </Message.Content>\n                <Message.List>\n                    <Message.Item>Change the filterstring</Message.Item>\n                    {hideEmpty && <Message.Item>Toggle \"Hide empty balances\" above</Message.Item>}\n                    <Message.Item>Open the <Link to={ {pathname: '/accounts/',} }>Account Manager</Link> to add additional accounts</Message.Item>\n                    <Message.Item>Open the <Link to={ {pathname: '/tokenContracts/'} }>Token Manager</Link> to tracked additional tokens</Message.Item>\n                </Message.List>\n            </Message>\n        }\n\n        return body\n    }\n}\n\nOverviewBodyContainer.propTypes = {\n    hideEmpty: PropTypes.bool.isRequired,\n    balancesByToken: PropTypes.object.isRequired\n}\n\nOverviewBodyContainer.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nconst mapStateToProps = (state, ownProps) => {\n    const {hideEmpty} = ownProps\n    const filterIsActive = (state.balance.listState.filter.length > 0)\n\n    // get balanceIds to display\n    const balanceIds = filterIsActive ? state.balance.listState.matchedBalanceIds : state.balance.allIds\n\n    // map IDs to Entries\n    let balanceEntries = balanceIds.map(id => state.balance.byId[id])\n\n    // remove empty balances if necessary\n    if (hideEmpty) {\n        balanceEntries = balanceEntries.filter(entry => (entry.balance.greaterThan(0)))\n    }\n\n    // now group the balances by token\n    const balancesByToken = groupBy(balanceEntries, 'tokenId')\n\n    return {\n        balancesByToken,\n    }\n}\n\nexport default connect(mapStateToProps)(OverviewBodyContainer)","import React, {useState} from 'react'\nimport PropTypes from 'prop-types'\nimport {Checkbox, Divider, Grid, Message} from 'semantic-ui-react'\nimport {Link} from 'react-router-dom'\nimport TokenListFilterContainer from '../token/TokenListFilterContainer'\nimport ScreenHeader from '../screens/ScreenHeader'\nimport OverviewBodyContainer from \"./OverviewBodyContainer\"\n\nconst Overview = (props) => {\n    const {hasAccounts} = props\n    const [hideEmpty, setHideEmpty] = useState(false)\n    const toggleHideEmpty = () => setHideEmpty(!hideEmpty)\n\n    let body\n    if (hasAccounts) {\n        body = <OverviewBodyContainer hideEmpty={hideEmpty}/>\n    } else {\n        body = <Message>\n            <Message.Header>\n                No accounts\n            </Message.Header>\n            <p>You have no watched or unlocked accounts. Open the <Link to={ {pathname: '/accounts/',} }>Account Manager</Link> to setup accounts.</p>\n        </Message>\n    }\n\n    return (\n        <React.Fragment>\n            <ScreenHeader title={'Overview'}/>\n            <Grid verticalAlign='middle' columns={2} divided>\n                <Grid.Row>\n                    <Grid.Column width={6}>\n                        <Checkbox toggle label='Hide empty balances' checked={hideEmpty} onChange={toggleHideEmpty} />\n                    </Grid.Column>\n                    <Grid.Column width={10}>\n                        <TokenListFilterContainer target={'balancelist'} />\n                    </Grid.Column>\n                </Grid.Row>\n            </Grid>\n            <Divider/>\n            {body}\n        </React.Fragment>\n    )\n}\n\nOverview.propTypes = {\n    hasAccounts: PropTypes.bool.isRequired,\n}\n\nOverview.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nexport default Overview\n","import React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport Overview from './Overview'\nimport {connect} from 'react-redux'\n\nclass OverviewContainer extends Component {\n    render() {\n        const {hasAccounts} = this.props\n        return (\n            <Overview hasAccounts={hasAccounts}/>\n        )\n    }\n}\n\nOverviewContainer.propTypes = {\n    hasAccounts: PropTypes.bool.isRequired,\n}\n\nOverviewContainer.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nconst mapStateToProps = state => {\n    const hasAccounts = (state.addresses.allIds.length > 0)\n\n    return {\n        hasAccounts,\n    }\n}\n\nexport default connect(mapStateToProps)(OverviewContainer)\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst Web3Info = (props) => {\n    const {name, id, nodeVersion, block} = props\n    const gitHub = 'https://github.com/TripleSpeeder/TokenStation'\n    const contact = 'michael@m-bauer.org'\n    const srcUrl = 'https://github.com/ethereum-lists/tokens'\n    return (\n        <React.Fragment>\n            <p>\n                Network: {name} ({id}) | Block: {block ? block.number : '?'} | Node version: {nodeVersion}\n            </p>\n            <p>\n                ERC20 contract data origin: <strong><a href={srcUrl} target='_blank' rel='noopener noreferrer'>{srcUrl}</a></strong>\n            </p>\n            <p>\n                GitHub: <strong><a target='_blank' rel='noopener noreferrer' href={gitHub}>{gitHub}</a></strong> | contact: <strong><a href={'mailto:' + contact}>{contact}</a></strong>\n            </p>\n        </React.Fragment>\n    )\n\n}\n\nWeb3Info.propTypes = {\n    name: PropTypes.string,\n    id: PropTypes.number,\n    block: PropTypes.shape({\n            number: PropTypes.number,\n            timestamp: PropTypes.number\n        }),\n    apiVersion: PropTypes.string,\n    nodeVersion: PropTypes.string,\n}\n\nexport default Web3Info\n","import React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport {connect} from \"react-redux\"\nimport Web3Info from \"./web3Info\"\nimport {Segment} from 'semantic-ui-react'\n\nclass Web3Container extends Component {\n    constructor(props, context) {\n        super(props, context)\n        this.filter = null\n    }\n\n    render() {\n        const apiVersion = this.props.web3.version.api\n        return <Segment textAlign='center'>\n            <Web3Info apiVersion={apiVersion}\n                         name={this.props.name}\n                         block={this.props.block}\n                         id={this.props.id}\n                         nodeVersion={this.props.nodeVersion}\n            />\n        </Segment>\n    }\n}\n\nWeb3Container.propTypes = {\n    web3: PropTypes.object,\n    name: PropTypes.string,\n    id: PropTypes.number,\n    block: PropTypes.object,\n    nodeVersion: PropTypes.string,\n}\n\nconst mapStateToProps = (state) => ({\n    web3: state.web3Instance.web3,\n    name: state.web3Instance.name,\n    id: state.web3Instance.id,\n    block: state.web3Instance.block,\n    nodeVersion: state.web3Instance.nodeVersion\n})\n\nexport default connect(mapStateToProps)(Web3Container)\n","import React from 'react'\nimport {Icon, Menu} from 'semantic-ui-react'\nimport {NavLink} from 'react-router-dom'\n\n\nconst Sidebar = () => {\n    return (\n        <Menu icon='labeled' fluid inverted vertical pointing size={'large'}>\n            <Menu.Item header>TokenStation.io</Menu.Item>\n            <Menu.Item as={NavLink} to='/overview' name='overview'>\n                <Icon name='home' />\n                Overview\n            </Menu.Item>\n\n            <Menu.Item as={NavLink} to='/accounts' name='accounts'>\n                <Icon name='users' />\n                Manage Accounts\n            </Menu.Item>\n\n            <Menu.Item as={NavLink} to='/events' name='events' >\n                <Icon name='exchange' />\n                View Transfer Events\n            </Menu.Item>\n\n            <Menu.Item as={NavLink} to='/tokenContracts' name='tokenContracts'>\n                <Icon name='cube' />\n                Manage Contracts\n            </Menu.Item>\n        </Menu>\n    )\n}\n\nexport default Sidebar\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {ADDRESS_TYPE_EXTERNAL, ADDRESS_TYPE_OWNED} from './addressActions'\nimport {Button, Icon, Popup, Table} from 'semantic-ui-react'\nimport AddressDisplay from '../common/AddressDisplay'\n\nconst AddressRow = (props) => {\n\n    const {address, addressType, ensName, handleRemove} = props\n\n    let iconName, popupContent, removeButton\n    if (addressType === ADDRESS_TYPE_OWNED) {\n        iconName = 'unlock'\n        popupContent = 'This is one of your addresses'\n        removeButton = null\n    } else {\n        iconName = 'eye'\n        popupContent = 'This is a watch-only address'\n        removeButton = <Button size='tiny' onClick={handleRemove} icon='delete'/>\n    }\n\n    const icon = <Popup trigger={<Icon size='large' name={iconName}/>}\n                        content={popupContent}\n    />\n\n    /*\n    let listProgress = null\n    if (this.props.progressCurrent < this.props.progressTotal) {\n        listProgress = <List.Description>\n            <Progress size='small'\n                      value={this.props.progressCurrent}\n                      total={this.props.progressTotal}\n                      progress='ratio'\n                      precision={1}\n            />\n        </List.Description>\n    }*/\n    return (\n        <Table.Row>\n            <Table.Cell textAlign={'left'} collapsing>\n                {icon}\n            </Table.Cell>\n            <Table.Cell textAlign={'left'}>\n                <AddressDisplay address={address} ensName={ensName}/>\n            </Table.Cell>\n            <Table.Cell textAlign={'right'} collapsing>\n                {removeButton}\n            </Table.Cell>\n        </Table.Row>\n    )\n}\n\nAddressRow.propTypes = {\n    address: PropTypes.string.isRequired,\n    ensName: PropTypes.string,\n    addressType: PropTypes.oneOf([ADDRESS_TYPE_OWNED, ADDRESS_TYPE_EXTERNAL]).isRequired,\n    handleRemove: PropTypes.func.isRequired\n}\n\nAddressRow.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nexport default AddressRow\n","import React, {PureComponent} from 'react'\nimport PropTypes from 'prop-types'\nimport {connect} from 'react-redux'\nimport {removeAddressThunk} from './addressActions'\nimport {BALANCE_STATES} from '../balance/balanceActions'\nimport AddressRow from './AddressRow'\n\n\nclass AddressContainer extends PureComponent {\n\n    handleRemove = () => {\n        this.props.removeAddress(this.props.addressId)\n    }\n\n    render() {\n        return <AddressRow address={this.props.address}\n                           addressType={this.props.addressType}\n                           ensName={this.props.ensName}\n                           handleRemove={this.handleRemove}\n        />\n    }\n}\n\nAddressContainer.propTypes = {\n    addressId: PropTypes.string.isRequired,\n    address: PropTypes.string.isRequired,\n    ensName: PropTypes.string,\n    removeAddress: PropTypes.func.isRequired,\n    progressTotal: PropTypes.number.isRequired,\n    progressCurrent: PropTypes.number.isRequired\n}\n\nAddressContainer.defaultProps = {}\n\nconst mapStateToProps = (state, ownProps) => {\n    const addressEntry = state.addresses.byId[ownProps.addressId]\n    const progressTotal = state.tokens.listState.total\n    // count all balance entries that include addressId\n    const matchedBalanceEntries = Object.values(state.balance.byId).filter(entry => {\n        return ((entry.addressId === ownProps.addressId) &&\n            (entry.balanceState === BALANCE_STATES.INITIALIZED))\n    })\n    const progressCurrent = matchedBalanceEntries.length\n\n    return {\n        address: addressEntry.address,\n        addressType: addressEntry.type,\n        ensName: addressEntry.ensName,\n        balancesState: addressEntry.balancesState,\n        progressTotal,\n        progressCurrent\n    }\n}\n\nconst mapDispatchToProps = dispatch => ({\n    removeAddress: (addressId) => {\n        dispatch(removeAddressThunk(addressId))\n    },\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddressContainer)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Form} from \"semantic-ui-react\"\n\nconst QueryAddressForm = (props) => {\n\n    const {handleChange, handleSubmit, loading, disabled, error, address, ensName, value} = props\n    return (\n        <Form onSubmit={handleSubmit}>\n            <Form.Group inline>\n                <Form.Input width={10}\n                            name='address'\n                            placeholder='Address or ENS Name'\n                            error={error}\n                            loading={loading}\n                            onChange={handleChange}\n                            value={value}\n                            label={'Add account'}\n                />\n                <Form.Button\n                    content='Submit'\n                    disabled={disabled}\n                    width={6}\n                />\n            </Form.Group>\n        </Form>\n    )\n}\n\nQueryAddressForm.propTypes = {\n    address: PropTypes.string,\n    ensName: PropTypes.string,\n    value: PropTypes.string.isRequired,\n    loading: PropTypes.bool.isRequired,\n    disabled: PropTypes.bool.isRequired,\n    error: PropTypes.bool.isRequired,\n    handleChange: PropTypes.func.isRequired,\n    handleSubmit: PropTypes.func.isRequired,\n}\n\nQueryAddressForm.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nexport default QueryAddressForm\n","import React, {Component} from 'react'\nimport {connect} from 'react-redux'\nimport {addNewAddress, ADDRESS_TYPE_EXTERNAL} from './addressActions'\nimport QueryAddressForm from './QueryAddressForm'\n\n\nexport const addressStates = {\n    ADDRESS_RESOLVING: 'address_resolving', // valid ENS name entered, waiting for resolving\n    ADDRESS_VALID: 'address_valid', // got a valid address\n    ADDRESS_INVALID: 'address_invalid',\n}\n\nexport class QueryAddressFormContainer extends Component {\n    constructor(props, context) {\n        super(props, context)\n\n        this.state = {\n            addressState: addressStates.ADDRESS_INVALID,\n            address: '',\n            ensName: '',\n            input: '',\n        }\n        // kraken4='0x267be1C1D684F78cb4F6a176C4911b741E4Ffdc0'\n    }\n\n    handleChange = async (e) => {\n        const input=e.target.value\n        let addressState = addressStates.ADDRESS_INVALID\n        let address = ''\n        let ensName = ''\n        // check for valid input (raw address and ENS name)\n        const validAddress = (/^(0x)?[0-9a-f]{40}$/i.test(input))\n        const validENSName = (/.*\\.eth$/i.test(input))\n        if (validENSName) {\n            // start resolving process\n            this.setState(\n                {\n                    addressState: addressStates.ADDRESS_RESOLVING,\n                    address: '',\n                    ensName: input,\n                    input,\n                }\n            )\n            try {\n                const resolvedAddress = await this.props.ens.lookup(input)\n                this.setState(\n                    {\n                        addressState: addressStates.ADDRESS_VALID,\n                        address: resolvedAddress,\n                        ensName: input,\n                        input: input,\n                    }\n                )\n            } catch (e) {\n                console.log(\"Could not resolve \" + input)\n                this.setState(\n                    {\n                        addressState: addressStates.ADDRESS_INVALID,\n                        address: '',\n                        ensName: input,\n                        input: input,\n                    }\n                )\n            }\n        }\n        else if(validAddress) {\n            // TODO: Lookup reverse ENS entry\n            addressState = addressStates.ADDRESS_VALID\n            ensName = ''\n            address = input\n            this.setState(\n                {\n                    addressState,\n                    address,\n                    ensName,\n                    input,\n                }\n            )\n        }\n        else {\n            this.setState(\n                {\n                    addressState: addressStates.ADDRESS_INVALID,\n                    address: '',\n                    ensName: '',\n                    input,\n                }\n            )\n        }\n    }\n\n    handleSubmit = () => {\n        const { address, ensName } = this.state\n        this.props.addNewAddress(address, ensName, ADDRESS_TYPE_EXTERNAL)\n        this.setState({\n            addressState: addressStates.ADDRESS_INVALID,\n            address: '',\n            ensName: '',\n            input: '',\n        })\n    }\n\n    render() {\n        const error = (this.state.addressState === addressStates.ADDRESS_INVALID)\n        const loading = (this.state.addressState === addressStates.ADDRESS_RESOLVING)\n        const disabled = (error || loading)\n        return (\n            <QueryAddressForm handleChange={this.handleChange}\n                              handleSubmit={this.handleSubmit}\n                              error = {error}\n                              loading={loading}\n                              disabled={disabled}\n                              address={this.state.address}\n                              ensName={this.state.ensName}\n                              value={this.state.input}\n            />\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    const ens = state.web3Instance.ens\n    return {\n        ens\n    }\n}\n\nlet mapDispatchToProps = dispatch => ({\n    addNewAddress: (address, ensName, type) => {\n        dispatch(addNewAddress(address, ensName, type))\n    }\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(QueryAddressFormContainer)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Button, Divider, Header, Message, Segment, Table} from 'semantic-ui-react'\nimport AddressContainer from './AddressContainer'\nimport QueryAddressFormContainer from \"./QueryAddressFormContainer\"\nimport {ETH_ENABLE_STATES} from '../web3/web3Actions'\n\nconst AddressList = (props) => {\n    let ownTable, watchTable\n    const {ethEnableState, ethEnable} = props\n    let waitingGrant = (ethEnableState === ETH_ENABLE_STATES.WAITING)\n\n    if (props.ownAddressIds.length) {\n        ownTable = <Table basic='very' selectable>\n            <Table.Body>\n                {props.ownAddressIds.map((addressId) =>\n                    <AddressContainer key={addressId} addressId={addressId}/>\n                )}\n            </Table.Body>\n        </Table>\n    } else if (ethEnableState === ETH_ENABLE_STATES.GRANTED) {\n        // Access granted, but no accounts? Must be either Mist with no accounts shared or locked Metamask.\n        ownTable = <Message>\n            <Message.Header>\n                No personal accounts\n            </Message.Header>\n            <p>You need to share your accounts so they are visible here. Log in to Metamask or share accounts in Mist .</p>\n        </Message>\n    } else {\n        // No accounts and no access. Ask for it.\n        ownTable = <Message>\n            <Message.Header>\n                No access to personal accounts\n            </Message.Header>\n            <p>You can grant access to your personal accounts. This will automatically put the accounts to the watch\n                list.</p>\n            <p><Button primary disabled={waitingGrant} loading={waitingGrant} onClick={ethEnable}>Grant access</Button></p>\n        </Message>\n    }\n\n    if (props.watchAddressIds.length) {\n        watchTable = <Table basic='very' selectable>\n            <Table.Body>\n                {props.watchAddressIds.map((addressId) =>\n                    <AddressContainer key={addressId} addressId={addressId}/>\n                )}\n            </Table.Body>\n        </Table>\n    } else {\n        watchTable = <Message>\n            <Message.Header>\n                No watched accounts\n            </Message.Header>\n            <p>You don't have any watched accounts.</p>\n        </Message>\n    }\n\n    return (\n        <React.Fragment>\n            <Segment>\n                <Header dividing as='h2'>Personal Accounts</Header>\n                {ownTable}\n            </Segment>\n            <Segment>\n                <Header dividing as='h2'>Watched Accounts</Header>\n                {watchTable}\n                <Divider/>\n                <QueryAddressFormContainer />\n            </Segment>\n        </React.Fragment>\n    )\n}\n\nAddressList.propTypes = {\n    ownAddressIds: PropTypes.array.isRequired,\n    watchAddressIds: PropTypes.array.isRequired,\n    ethEnableState: PropTypes.oneOf(Object.values(ETH_ENABLE_STATES)),\n    ethEnable: PropTypes.func.isRequired,\n}\n\nexport default AddressList\n","import React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport {connect} from 'react-redux'\nimport {ADDRESS_TYPE_EXTERNAL, ADDRESS_TYPE_OWNED, changeOwnAddresses} from './addressActions'\nimport AddressList from './AddressList'\nimport {ETH_ENABLE_STATES, requestEthEnable} from '../web3/web3Actions'\n\nclass AddressListContainer extends Component {\n    constructor(props, context) {\n        super(props, context)\n        this.updateWeb3Accounts = this.updateWeb3Accounts.bind(this)\n        this.requestEthEnable = this.requestEthEnable.bind(this)\n        this.checkAccountTimer = 0\n    }\n\n    render() {\n        const ethEnableState = this.props.web3Instance ? this.props.web3Instance.ethEnableState : ETH_ENABLE_STATES.REJECTED\n        return <AddressList watchAddressIds={this.props.watchAddressIds}\n                            ownAddressIds={this.props.ownAddressIds}\n                            ethEnableState={ethEnableState}\n                            ethEnable={this.requestEthEnable}\n        />\n    }\n\n    componentDidMount() {\n        this.initAccounts()\n    }\n\n    componentWillReceiveProps(newProps) {\n        if (newProps.web3 && (newProps.web3 !== this.props.web3)) {\n            this.initAccounts(newProps.web3)\n        }\n    }\n\n    componentWillUnmount() {\n        if (this.checkAccountTimer) {\n            clearInterval(this.checkAccountTimer)\n            this.checkAccountTimer = 0\n        }\n    }\n\n    initAccounts(web3 = this.props.web3) {\n        if (web3) {\n            if (this.checkAccountTimer) {\n                clearInterval(this.checkAccountTimer)\n                this.checkAccountTimer = 0\n            }\n            this.updateWeb3Accounts(this.props.web3)\n            if (this.props.web3.currentProvider.isMetaMask === true) {\n                console.log(\"Metamask detected. Watching for account changes\")\n                this.checkAccountTimer = setInterval(this.updateWeb3Accounts, 100)\n            }\n        }\n    }\n\n    updateWeb3Accounts(web3 = this.props.web3) {\n        web3.eth.getAccounts((error, accounts) => {\n            if (accounts) {\n                this.props.changeOwnAddresses(accounts)\n            }\n        })\n    }\n\n    requestEthEnable() {\n        this.props.ethEnable()\n    }\n}\n\nAddressListContainer.propTypes = {\n    web3: PropTypes.object,\n    ownAddressIds: PropTypes.array.isRequired,\n    watchAddressIds: PropTypes.array.isRequired,\n}\n\nAddressListContainer.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nconst mapStateToProps = state => {\n    const ownAddressIds = state.addresses.allIds.filter(id => (state.addresses.byId[id].type === ADDRESS_TYPE_OWNED))\n    const watchAddressIds = state.addresses.allIds.filter(id => (state.addresses.byId[id].type === ADDRESS_TYPE_EXTERNAL))\n    return {\n        ownAddressIds,\n        watchAddressIds,\n        web3Instance: state.web3Instance ? state.web3Instance : null,\n        web3: state.web3Instance ? state.web3Instance.web3 : null,\n    }\n}\n\nconst mapDispatchToProps = dispatch => ({\n    changeOwnAddresses: (accounts) => {\n        dispatch(changeOwnAddresses(accounts))\n    },\n    ethEnable: () => {\n        dispatch(requestEthEnable())\n    }\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddressListContainer)\n","import React from 'react'\nimport AddressListContainer from '../address/AddressListContainer'\nimport ScreenHeader from '../screens/ScreenHeader'\n\nconst Accounts = () => {\n    return (\n        <React.Fragment>\n            <ScreenHeader title={'Manage Accounts'}/>\n            <AddressListContainer />\n        </React.Fragment>\n    )\n}\n\nexport default Accounts\n","import React from 'react'\nimport PropTypes from 'prop-types';\nimport {Table, Form} from 'semantic-ui-react'\nimport AddressDisplay from '../common/AddressDisplay'\n\nconst SelectableToken = (props) => {\n\n    const {address, ensName, name, symbol, checked, onChange} = props\n\n    return (\n        <Table.Row>\n            <Table.Cell collapsing>\n                <Form.Checkbox checked={checked} onChange={onChange}/>\n            </Table.Cell>\n            <Table.Cell>\n                <strong>{name}</strong>\n            </Table.Cell>\n            <Table.Cell>\n                <strong>{symbol}</strong>\n            </Table.Cell>\n            <Table.Cell>\n                <AddressDisplay address={address} ensName={ensName}/>\n            </Table.Cell>\n        </Table.Row>\n    )\n}\n\nSelectableToken.propTypes = {\n    id: PropTypes.string.isRequired,\n    checked: PropTypes.bool,\n    address: PropTypes.string.isRequired,\n    ensName: PropTypes.string,\n    name: PropTypes.string.isRequired,\n    symbol: PropTypes.string.isRequired,\n    onChange: PropTypes.func.isRequired,\n}\n\nexport default SelectableToken\n","import React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport {connect} from \"react-redux\"\nimport SelectableToken from \"./SelectableToken\"\nimport {changeTokenTrackingThunk} from './tokenActions'\n\n\nclass SelectableTokenContainer extends Component {\n    constructor(props, context) {\n        super(props, context)\n        this.handleChange = this.handleChange.bind(this)\n    }\n\n    handleChange(e, data) {\n        const {checked} = data\n        this.props.onChange(this.props.tokenId, checked)\n    }\n\n    render() {\n        return <SelectableToken id={this.props.tokenId}\n                                address={this.props.tokenAddress}\n                                name={this.props.tokenName}\n                                symbol={this.props.tokenSymbol}\n                                onChange={this.handleChange}\n                                checked={this.props.tokenTracked}\n        />\n    }\n}\n\nSelectableTokenContainer.propTypes = {\n    tokenId: PropTypes.string.isRequired,\n    tokenAddress: PropTypes.string.isRequired,\n    tokenName: PropTypes.string.isRequired,\n    tokenSymbol: PropTypes.string.isRequired,\n    onChange: PropTypes.func.isRequired,\n}\n\nSelectableTokenContainer.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nconst mapStateToProps = (state, ownProps) => {\n    const token = state.tokens.byId[ownProps.tokenId]\n    const tracked = (state.tokens.trackedIds.indexOf(ownProps.tokenId) > -1)\n    return {\n        tokenAddress: token.address,\n        tokenName: token.name,\n        tokenSymbol: token.symbol,\n        tokenTracked: tracked,\n    }\n}\n\nconst mapDispatchToProps = dispatch => ({\n    onChange: (tokenId, checked) => {\n        dispatch(changeTokenTrackingThunk(tokenId, checked))\n    }\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectableTokenContainer)\n","import React from 'react'\nimport PropTypes from 'prop-types';\nimport {Table, Message} from 'semantic-ui-react'\nimport SelectableTokenContainer from \"./SelectableTokenContainer\"\n\nconst SelectableTokenList = (props) => {\n\n    const {tokenList} = props\n\n    if (tokenList.length) {\n        return (\n            <Table celled>\n                <Table.Body>\n                {tokenList.map((tokenId) => <SelectableTokenContainer\n                    key={tokenId}\n                    tokenId={tokenId}\n                />)}\n                </Table.Body>\n            </Table>\n        )\n    } else {\n        return (\n            <Message negative>\n                <Message.Header>No token contracts to display.</Message.Header>\n                <Message.Content>Things you can try:</Message.Content>\n                <Message.List items={['change/clear the filterstring', 'check if you are connected to the correct network']}>\n                </Message.List>\n            </Message>\n        )\n    }\n}\n\nSelectableTokenList.propTypes = {\n    tokenList: PropTypes.array.isRequired\n}\n\nexport default SelectableTokenList\n","import React, {Component} from 'react'\nimport {connect} from \"react-redux\"\nimport {Grid, Divider, Checkbox, Pagination, Container, Dropdown} from 'semantic-ui-react'\nimport TokenListFilterContainer from './TokenListFilterContainer'\nimport SelectableTokenList from \"./SelectableTokenList\"\nimport {changeTokenListPage, clearTokenList, setFilterProps} from './tokenActions'\n\nclass SelectableTokenListContainer extends Component {\n    constructor(props, context) {\n        super(props, context)\n        this.handleShowOnlyTrackedChange = this.handleShowOnlyTrackedChange.bind(this)\n        this.handlePaginationChange = this.handlePaginationChange.bind(this)\n        this.handleLoadTokens = this.handleLoadTokens.bind(this)\n    }\n\n    handleShowOnlyTrackedChange(e, data) {\n        const {checked} = data\n        this.props.setShowTracked(checked)\n    }\n\n    handlePaginationChange(e, data) {\n        const {activePage} = data\n        this.props.setTokenListPage(activePage)\n    }\n\n    handleLoadTokens() {\n        this.props.clearTokenList()\n    }\n\n    render() {\n        let pager = null\n        if (this.props.totalPages > 1) {\n            pager = <Container textAlign={'center'}>\n                        <Pagination activePage={this.props.activePage}\n                                    onPageChange={this.handlePaginationChange}\n                                    totalPages={this.props.totalPages}/>\n                    </Container>\n        }\n        return (\n            <React.Fragment>\n                <Grid verticalAlign='middle' columns={2} divided>\n                    <Grid.Row>\n                        <Grid.Column width={6}>\n                            <Checkbox toggle label='Only show tracked token' checked={this.props.showOnlyTracked} onChange={this.handleShowOnlyTrackedChange} />\n                        </Grid.Column>\n                        <Grid.Column width={9}>\n                            <TokenListFilterContainer target={'tokenlist'}/>\n                        </Grid.Column>\n                        <Grid.Column width={1}>\n                            <Dropdown icon={'setting'}>\n                                <Dropdown.Menu>\n                                    <Dropdown.Item text='Reload token list' onClick={this.handleLoadTokens} />\n                                </Dropdown.Menu>\n                            </Dropdown>\n                        </Grid.Column>\n                    </Grid.Row>\n                </Grid>\n                <Divider/>\n                <SelectableTokenList\n                    tokenList={this.props.tokenIds}\n                />\n                {pager}\n            </React.Fragment>\n            )\n    }\n}\n\nconst mapStateToProps = state => {\n    const listState = state.tokens.listState.listState\n    const itemsPerPage = 20\n    let totalPages = 1\n    const activePage = state.tokens.listState.activePage\n    const filterIsActive = state.tokens.listState.filterIsActive\n    let tokenIds = filterIsActive ? state.tokens.listState.matchedTokenIds : state.tokens.allIds\n    const showOnlyTracked = state.tokens.listState.showOnlyTracked\n    const numVisibleTokens = tokenIds.length\n    if (numVisibleTokens) {\n        totalPages = Math.ceil(numVisibleTokens / itemsPerPage)\n    }\n    const sliceStart = (activePage-1)*itemsPerPage\n    tokenIds = tokenIds.slice(sliceStart, sliceStart+itemsPerPage)\n    return {\n        tokenIds,\n        showOnlyTracked,\n        activePage,\n        totalPages,\n        listState,\n    }\n}\n\nconst mapDispatchToProps = dispatch => ({\n    setShowTracked: (showOnlyTracked) => {\n        dispatch(setFilterProps({showOnlyTracked}))\n    },\n    setTokenListPage: (activePage) => {\n        dispatch(changeTokenListPage(activePage))\n    },\n    clearTokenList: () => {\n        dispatch(clearTokenList())\n    }\n})\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectableTokenListContainer)\n","import React from 'react'\nimport {Icon, Message} from 'semantic-ui-react'\nimport SelectableTokenListContainer from \"../token/SelectableTokenListContainer\"\nimport ScreenHeader from '../screens/ScreenHeader'\n\nconst TokenContracts = () => {\n    return (\n        <React.Fragment>\n            <ScreenHeader title={'Manage Token Contracts'}/>\n            <Message info icon>\n                <Icon name={'info'}/>\n                <Message.Header>Select which tokens to track</Message.Header>\n                <Message.Content>\n                    In the list below, check the tokens you want to keep track of. Use the filter to\n                    quickly find specific tokens. You can filter by token name, symbol or contract address.\n                </Message.Content>\n            </Message>\n            <SelectableTokenListContainer/>\n        </React.Fragment>\n    )\n}\n\nexport default TokenContracts\n","import React, {Component} from 'react'\nimport {Container, Dropdown, Form, Grid} from 'semantic-ui-react'\nimport {changeSelectorTokenIdThunk} from '../token/tokenActions'\nimport {connect} from 'react-redux'\nimport {changeSelectorAddressId} from '../address/addressActions'\n\nclass EventFilterContainer extends Component {\n\n    render() {\n        const {\n            tokenOptions, selectedTokenId, onTokenSelect,\n            addressOptions, selectedAddressId, onAddressSelect,\n        } = this.props\n\n        return (\n            <Container>\n\n            <Grid>\n                <Grid.Row>\n                    <Grid.Column width={8}>\n                        <Form>\n                            <Form.Field inline>\n                                <label>Show Transfers of token:</label>\n                                <Dropdown fluid search selection\n                                          options={tokenOptions}\n                                          onChange={onTokenSelect}\n                                          value={selectedTokenId}\n                                />\n                            </Form.Field>\n                        </Form>\n                    </Grid.Column>\n                    <Grid.Column width={8}>\n                        <Form>\n                            <Form.Field inline>\n                                <label>To/From Account:</label>\n                                <Dropdown fluid search selection\n                                          options={addressOptions}\n                                          onChange={onAddressSelect}\n                                          value={selectedAddressId}\n                                />\n                            </Form.Field>\n                        </Form>\n                    </Grid.Column>\n                </Grid.Row>\n            </Grid>\n            </Container>\n        )\n    }\n}\n\nEventFilterContainer.propTypes = {\n    //myProp: PropTypes.object.isRequired\n}\n\nEventFilterContainer.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nconst mapStateToProps = (state) => {\n\n    const selectedTokenId = state.tokens.selector.selectedTokenId\n    const tokenOptions = state.tokens.trackedIds.map(id => (\n        {\n            key: id,\n            value: id,\n            text: state.tokens.byId[id].name + \" (\" + state.tokens.byId[id].symbol + \")\"\n        }\n    ))\n    tokenOptions.sort((a, b) => (a.text > b.text))\n\n    const selectedAddressId = state.addresses.selector.selectedAddressId\n    const addressOptions = state.addresses.allIds.map(id =>\n        ({\n            key: id,\n            value: id,\n            text: state.addresses.byId[id].ensName ? state.addresses.byId[id].ensName : id\n        })\n    )\n    addressOptions.sort((a, b) => (a.text > b.text))\n\n    return {\n        tokenOptions,\n        selectedTokenId,\n        addressOptions,\n        selectedAddressId\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        onTokenSelect: (e, {value}) => {\n            dispatch(changeSelectorTokenIdThunk(value))\n        },\n        onAddressSelect: (e, {value}) => {\n            dispatch(changeSelectorAddressId(value))\n        },\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EventFilterContainer)\n\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Button, Grid, Icon, Message, } from 'semantic-ui-react'\n\nconst EventLoader = (props) => {\n    const {loading, loadingFromBlock, loadingToBlock, resultCount, resultFromBlock, currentChunk, maxChunks,\n        resultToBlock, onLoadMore, canLoadMore} = props\n\n    let button = <Button icon disabled={!canLoadMore} onClick={onLoadMore} labelPosition={'left'}><Icon name={'search'}/>Load more</Button>\n\n    if (loading) {\n        button = <Message warning icon>\n                    <Icon loading name={'circle notched'}/>\n            <Message.Content>\n                <Message.Header>Loading events</Message.Header>\n                Scanning {loadingFromBlock} - {loadingToBlock} - Chunk {currentChunk}/{maxChunks}\n            </Message.Content>\n        </Message>\n    }\n\n    return (\n        <Grid verticalAlign='middle' columns={2}>\n            <Grid.Row>\n                <Grid.Column >\n                    <Message info icon>\n                        <Icon name={'exchange'}/>\n                        <Message.Content>\n                            <Message.Header>Showing {resultCount} transfer events</Message.Header>\n                             Block {resultFromBlock} to {resultToBlock}\n                        </Message.Content>\n                    </Message>\n                </Grid.Column>\n                <Grid.Column>\n                    {button}\n                </Grid.Column>\n            </Grid.Row>\n        </Grid>\n    )\n}\n\nEventLoader.propTypes = {\n    loading: PropTypes.bool.isRequired,\n    loadingFromBlock: PropTypes.number,\n    loadingToBlock: PropTypes.number,\n    loadingCurrentBlock: PropTypes.number,\n    resultCount: PropTypes.number.isRequired,\n    resultFromBlock: PropTypes.number.isRequired,\n    resultFromBlockDate: PropTypes.string.isRequired,\n    resultToBlock: PropTypes.number.isRequired,\n    onLoadMore: PropTypes.func.isRequired,\n    currentChunk: PropTypes.number.isRequired,\n    maxChunks: PropTypes.number.isRequired,\n    canLoadMore: PropTypes.bool.isRequired,\n}\n\nEventLoader.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nexport default EventLoader\n","import React, {Component} from 'react'\nimport {connect} from 'react-redux'\nimport EventLoader from './EventLoader'\nimport {buildAddressContractEventId} from './reducers/addressContractEventsByIdReducer'\nimport {loadTokenTransferEvents} from '../token/tokenActions'\n\n\nclass EventLoaderContainer extends Component {\n    constructor(props, context) {\n        super(props, context)\n        this.loadMoreEvents = this.loadMoreEvents.bind(this)\n    }\n\n    componentDidMount() {\n        EventLoaderContainer.checkEventsLoaded(this.props)\n    }\n\n    componentWillReceiveProps(newProps) {\n        EventLoaderContainer.checkEventsLoaded(newProps)\n    }\n\n    static checkEventsLoaded(props) {\n        if (props.currentBlock && props.aceId && (props.hasAceEntry === false)) {\n            // I have an aceID, but no according entry. Better start loading...\n            //const rangeEnd = props.currentBlock\n            //const rangeStart = rangeEnd - 10000\n            console.log(\"Loading events \"/* + rangeStart + \"-\" + rangeEnd*/)\n            props.loadTokenTransferEvents(\n                0,\n                0,\n                props.tokenId,\n                props.addressId\n            )\n        }\n    }\n\n    loadMoreEvents() {\n        // query the previous 1000 blocks for token transfers to/from my addresses\n        const rangeEnd = this.props.resultFromBlock ? this.props.resultFromBlock : this.props.currentBlock\n        const rangeStart = rangeEnd - 10000\n        console.log(\"Loading events \" + rangeStart + \"-\" + rangeEnd)\n        this.props.loadTokenTransferEvents(\n            rangeStart,\n            rangeEnd,\n            this.props.tokenId,\n            this.props.addressId\n        )\n    }\n\n    render() {\n        const {\n            loading, resultCount, resultFromBlock, resultFromBlockDate, resultToBlock, canLoadMore,\n            loadingFromBlock, loadingToBlock, loadingCurrentBlock, currentChunk, maxChunks } = this.props\n        return (\n            <EventLoader\n                loading={loading}\n                resultCount={resultCount}\n                resultFromBlock={resultFromBlock}\n                resultFromBlockDate={resultFromBlockDate}\n                resultToBlock={resultToBlock}\n                onLoadMore={this.loadMoreEvents}\n                loadingFromBlock={loadingFromBlock}\n                loadingToBlock={loadingToBlock}\n                loadingCurrentBlock={loadingCurrentBlock}\n                currentChunk={currentChunk}\n                maxChunks={maxChunks}\n                canLoadMore={canLoadMore}\n            />\n        )\n    }\n}\n\nEventLoaderContainer.propTypes = {\n    //myProp: PropTypes.object.isRequired\n}\n\nEventLoaderContainer.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nconst mapStateToProps = (state) => {\n    let resultCount = 0\n    let loading = false\n    let resultFromBlock = 0\n    let resultToBlock = 0\n    let resultFromBlockDate = 'XXX'\n    let aceId = undefined\n    let aceEntry = undefined\n    let loadingFromBlock = 0\n    let loadingToBlock = 0\n    let loadingCurrentBlock = 0\n    let tokenId = state.tokens.selector.selectedTokenId\n    // make sure selected token is actually existing and being tracked. Might be an old token from\n    // browser localstorage or from another network\n    if ((state.tokens.allIds.indexOf(tokenId) === -1) || (state.tokens.trackedIds.indexOf(tokenId) ===-1))\n    {\n        tokenId = undefined\n    }\n    const addressId = state.addresses.selector.selectedAddressId\n    const currentBlock = state.web3Instance.block.number\n    const currentChunk = state.events.listState.currentChunk\n    const maxChunks = state.events.listState.maxChunks\n    const canLoadMore = Boolean(tokenId && addressId)\n    if (tokenId && addressId) {\n        aceId = buildAddressContractEventId(addressId, tokenId)\n        aceEntry = state.events.aceById[aceId]\n        if (aceEntry) {\n            // okay, entry existing. Now look at checked block range\n            resultFromBlock = aceEntry.firstBlock\n            resultToBlock = aceEntry.lastBlock\n            resultCount = aceEntry.eventIds.length\n            // is aceEntry currently being loaded?\n            loading = aceEntry.isLoading\n            loadingFromBlock = aceEntry.loadingFromBlock\n            loadingToBlock = aceEntry.loadingToBlock\n            loadingCurrentBlock = aceEntry.loadingCurrentBlock\n        }\n    }\n\n    return {\n        loading,\n        resultCount,\n        resultFromBlock,\n        resultFromBlockDate,\n        resultToBlock,\n        currentBlock,\n        tokenId,\n        addressId,\n        aceId,\n        hasAceEntry: Boolean(aceEntry),\n        loadingToBlock,\n        loadingFromBlock,\n        loadingCurrentBlock,\n        currentChunk,\n        maxChunks,\n        canLoadMore\n    }\n}\n\nconst mapDispatchToProps = dispatch => ({\n    loadTokenTransferEvents: (firstBlock, lastBlock, tokenId, addressId) => {\n        dispatch(loadTokenTransferEvents(tokenId, firstBlock, lastBlock, [addressId]))\n    }\n})\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EventLoaderContainer)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Popup} from 'semantic-ui-react'\n\nconst TxHashDisplay = (props) => {\n    const {txHash} = props\n    const shortHash = txHash.slice(0, 10).concat('...')\n    const trigger = <span>{shortHash}</span>\n    return (\n        <Popup\n            trigger={trigger}\n            content={txHash}\n        />\n    )\n}\n\nTxHashDisplay.propTypes = {\n    //myProp: PropTypes.object.isRequired\n    txHash: PropTypes.string.isRequired\n}\n\n\nexport default TxHashDisplay\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Icon, Table} from 'semantic-ui-react'\nimport TxHashDisplay from '../common/TxHashDisplay'\nimport AddressDisplay from '../common/AddressDisplay'\n\nexport const TRANSFER_EVENT_TYPES = {\n    NEUTRAL: 'neutral',\n    POSITIVE: 'postivie',\n    NEGATIVE: 'negative'\n}\n\nconst TransferEvent = (props) => {\n    const {txHash, blockNumber, from, fromENS, to, toENS, type} = props\n    const quantity = props.quantity.toFixed(6)\n    let icon = null\n    let positive = false\n    let negative = false\n    switch(type) {\n        case TRANSFER_EVENT_TYPES.POSITIVE:\n            icon = <Icon name='plus' color='green' circular/>\n            positive = true\n            break\n        case TRANSFER_EVENT_TYPES.NEGATIVE:\n            icon = <Icon name='minus' color='red' circular/>\n            negative = true\n            break\n        case TRANSFER_EVENT_TYPES.NEUTRAL:\n        default:\n            // no icon, neither positive nor negative hint\n    }\n\n    return (\n        <React.Fragment>\n            <Table.Row>\n                <Table.Cell textAlign={'right'}>#: </Table.Cell>\n                <Table.Cell><strong>{blockNumber}</strong></Table.Cell>\n                <Table.Cell textAlign={'right'}>From: </Table.Cell>\n                <Table.Cell><AddressDisplay address={from} ensName={fromENS}/></Table.Cell>\n                <Table.Cell rowSpan='2' textAlign={'right'}>{icon}</Table.Cell>\n                <Table.Cell rowSpan='2' positive={positive} negative={negative} textAlign={'right'}>{quantity}</Table.Cell>\n            </Table.Row>\n            <Table.Row>\n                <Table.Cell textAlign={'right'}>Tx: </Table.Cell>\n                <Table.Cell><strong><TxHashDisplay txHash={txHash}/></strong></Table.Cell>\n                <Table.Cell textAlign={'right'}>To: </Table.Cell>\n                <Table.Cell><AddressDisplay address={to} ensName={toENS}/></Table.Cell>\n            </Table.Row>\n        </React.Fragment>\n    )\n}\n\nTransferEvent.propTypes = {\n    txHash: PropTypes.string.isRequired,\n    blockNumber: PropTypes.number.isRequired,\n    from: PropTypes.string.isRequired,\n    to: PropTypes.string.isRequired,\n    fromENS: PropTypes.string,\n    toENS: PropTypes.string,\n    type: PropTypes.oneOf([\n        TRANSFER_EVENT_TYPES.NEUTRAL,\n        TRANSFER_EVENT_TYPES.POSITIVE,\n        TRANSFER_EVENT_TYPES.NEGATIVE\n    ]).isRequired,\n    quantity: PropTypes.object.isRequired, // BigNum\n}\n\nTransferEvent.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nexport default TransferEvent\n","import React, {PureComponent} from 'react'\nimport PropTypes from 'prop-types'\nimport {connect} from 'react-redux'\nimport TransferEvent, {TRANSFER_EVENT_TYPES} from './TransferEvent'\n\nclass TransferEventContainer extends PureComponent {\n    render() {\n        const {txHash, blockNumber, from, to, type, quantity, positive, negative} = this.props\n        return (\n            <TransferEvent blockNumber={blockNumber}\n                           from={from}\n                           to={to}\n                           quantity={quantity}\n                           txHash={txHash}\n                           type={type}\n                           positive={positive}\n                           negative={negative}\n            />\n        )\n    }\n}\n\nTransferEventContainer.propTypes = {\n    //myProp: PropTypes.object.isRequired\n    transferEventId: PropTypes.string.isRequired,\n}\n\nTransferEventContainer.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nconst mapStateToProps = (state, ownProps) => {\n    const transferEvent = state.events.byId[ownProps.transferEventId]\n    const addressId = state.addresses.selector.selectedAddressId\n    const rawEvent = transferEvent.transferEvent\n    const token = state.tokens.byId[transferEvent.tokenId]\n    const quantity = rawEvent.args._value.dividedBy(token.decimals)\n    const from = rawEvent.args._from\n    const to = rawEvent.args._to\n    // events that are not to/from one of the watched accounts are neutral\n    let type = TRANSFER_EVENT_TYPES.NEUTRAL\n    if (addressId) {\n        // check if transfer is to/from own address\n        type = addressId.toLowerCase() === from ? TRANSFER_EVENT_TYPES.NEGATIVE : TRANSFER_EVENT_TYPES.POSITIVE\n    }\n    return {\n        txHash: rawEvent.transactionHash,\n        blockNumber: rawEvent.blockNumber,\n        from,\n        to,\n        type,\n        quantity,\n    }\n}\n\nexport default connect(mapStateToProps)(TransferEventContainer)\n\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Table} from 'semantic-ui-react'\nimport TransferEventContainer from './TransferEventContainer'\n\nconst TransferEventsList = (props) => {\n    return (\n        <Table compact>\n            <Table.Header>\n                <Table.Row>\n                    <Table.HeaderCell colSpan='2' textAlign={'center'}>Block#/TransactionHash</Table.HeaderCell>\n                    <Table.HeaderCell colSpan='2' textAlign={'center'}>From/To</Table.HeaderCell>\n                    <Table.HeaderCell colSpan='2' textAlign={'right'}>Quantity</Table.HeaderCell>\n                </Table.Row>\n            </Table.Header>\n\n            <Table.Body>\n                {props.transferEventIds.map(transferEventId =>\n                    <TransferEventContainer key={transferEventId}\n                                            transferEventId={transferEventId}\n                    />\n                )}\n            </Table.Body>\n        </Table>\n    )\n}\n\nTransferEventsList.propTypes = {\n    //myProp: PropTypes.object.isRequired\n    transferEventIds: PropTypes.array.isRequired,\n}\n\nTransferEventsList.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nexport default TransferEventsList\n","import React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport {connect} from 'react-redux'\nimport {buildAddressContractEventId} from './reducers/addressContractEventsByIdReducer'\nimport TransferEventsList from './TransferEventsList'\nimport {Container, Pagination} from 'semantic-ui-react'\nimport {changeTransferEventListPage} from './eventActions'\n\nclass TransferEventsListContainer extends Component {\n\n    constructor(props, context) {\n        super(props, context)\n        this.handlePaginationChange = this.handlePaginationChange.bind(this)\n    }\n\n    handlePaginationChange(e, data) {\n        const {activePage} = data\n        this.props.setTransferEventListPage(activePage)\n    }\n\n    render() {\n        const {aceEventIds, totalPages, activePage} = this.props\n\n        let pager = null\n        if (totalPages > 1) {\n            pager = <Container textAlign={'center'}>\n                <Pagination activePage={activePage}\n                            onPageChange={this.handlePaginationChange}\n                            totalPages={totalPages}/>\n            </Container>\n        }\n\n        return (\n            <React.Fragment>\n                <TransferEventsList transferEventIds={aceEventIds}/>\n                {pager}\n            </React.Fragment>\n        )\n    }\n}\n\nTransferEventsListContainer.propTypes = {\n    token: PropTypes.object\n}\n\nTransferEventsListContainer.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nconst mapStateToProps = (state) => {\n    const tokenId = state.tokens.selector.selectedTokenId\n    const addressId = state.addresses.selector.selectedAddressId\n    const activePage = state.events.listState.activePage\n\n    const itemsPerPage = 15\n    let totalPages = 1\n    let aceEntry = undefined\n    let aceEventIds = []\n\n    // first try to get aceEntry\n    if (tokenId && addressId) {\n        const aceId = buildAddressContractEventId(addressId, tokenId)\n        aceEntry = state.events.aceById[aceId]\n    }\n\n    // if there is an aceEntry get actual events and prepare paginator\n    if (aceEntry) {\n        aceEventIds = aceEntry.eventIds\n        totalPages = Math.ceil(aceEventIds.length / itemsPerPage)\n        const sliceStart = (activePage-1)*itemsPerPage\n        aceEventIds = aceEventIds.slice(sliceStart, sliceStart+itemsPerPage)\n    }\n\n    return {\n        aceEventIds,\n        activePage,\n        totalPages,\n    }\n}\n\nconst mapDispatchToProps = dispatch => ({\n    setTransferEventListPage: (activePage) => {\n        dispatch(changeTransferEventListPage(activePage))\n    },\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TransferEventsListContainer)\n","import React from 'react'\nimport EventFilterContainer from '../event/EventFilterContainer'\nimport EventLoaderContainer from '../event/EventLoaderContainer'\nimport TransferEventsListContainer from '../event/TransferEventsListContainer'\nimport ScreenHeader from '../screens/ScreenHeader'\n\nconst Events = () => {\n    return (\n        <React.Fragment>\n            <ScreenHeader title={'Transfer Events'}/>\n            <EventFilterContainer/>\n            <EventLoaderContainer/>\n            <TransferEventsListContainer/>\n        </React.Fragment>\n    )\n}\n\nexport default Events\n","import React, {Component} from 'react'\nimport {connect} from 'react-redux'\nimport {changeSelectorTokenIdThunk} from '../token/tokenActions'\nimport Events from './Events'\nimport {changeSelectorAddressId} from '../address/addressActions'\n\nclass EventsContainer extends Component {\n    constructor(props, context) {\n        super(props, context)\n        EventsContainer.mapRouteParamsToState(props)\n    }\n\n    /* If route params contain tokenId and/or address trigger according actions to have them in store */\n    static mapRouteParamsToState(props) {\n        if (props.match.params.tokenId) {\n            props.setSelectedToken(props.match.params.tokenId)\n            if (props.match.params.address) {\n                props.setSelectedAddress(props.match.params.address)\n            } else {\n                // if a token is provided, but no address -> make sure to display events of all watched addresses\n                props.setSelectedAddress(undefined)\n            }\n        }\n    }\n\n    componentWillReceiveProps(newProps) {\n        EventsContainer.mapRouteParamsToState(newProps)\n    }\n\n    render() {\n        return <Events/>\n    }\n}\n\nEventsContainer.propTypes = {\n    //myProp: PropTypes.object.isRequired\n}\n\nEventsContainer.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nconst mapStateToProps = state => ({})\n\nconst mapDispatchToProps = dispatch => ({\n    setSelectedToken: (tokenId) => {\n        dispatch(changeSelectorTokenIdThunk(tokenId))\n    },\n    setSelectedAddress: (address) => {\n        dispatch(changeSelectorAddressId(address))\n    }\n})\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EventsContainer)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Icon, Message} from 'semantic-ui-react'\n\nconst NetworkWarning = (props) => {\n    const {networkId, networkName} = props\n\n    return(\n        <Message size={'small'} icon warning>\n            <Icon name='warning' />\n            <Message.Content>\n                <Message.Header>\n                    You are not connected to mainnet!\n                </Message.Header>\n                Your current network: {networkName} (ID: {networkId})\n            </Message.Content>\n        </Message>\n    )\n}\n\nNetworkWarning.propTypes = {\n    networkId: PropTypes.number.isRequired,\n    networkName: PropTypes.string.isRequired\n}\n\n\nexport default NetworkWarning\n","import React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport connect from 'react-redux/es/connect/connect'\nimport NetworkWarning from './NetworkWarning'\nimport Grid from 'semantic-ui-react/dist/es/collections/Grid/Grid'\n\nclass NetworkWarningController extends Component {\n    render() {\n        const {networkId, networkName} = this.props\n        if (networkId === 1) {\n            // mainnet. No need for a warning!\n            return null\n        }\n\n        return (\n            <Grid.Row>\n                <NetworkWarning networkId={networkId} networkName={networkName}/>\n            </Grid.Row>\n        )\n    }\n}\n\nNetworkWarningController.propTypes = {\n    networkId: PropTypes.number.isRequired,\n    networkName: PropTypes.string.isRequired,\n}\n\nconst mapStateToProps = state => {\n    return {\n        networkId: state.web3Instance.id,\n        networkName: state.web3Instance.name,\n    }\n}\n\nexport default connect(mapStateToProps)(NetworkWarningController)\n","import React, {Component} from 'react'\nimport OverviewContainer from '../segments/OverviewContainer'\nimport Web3Container from '../web3/web3Container'\nimport {Grid} from 'semantic-ui-react'\nimport {Route, Switch} from 'react-router-dom'\nimport Sidebar from '../segments/Sidebar'\nimport Accounts from '../segments/Accounts'\nimport TokenContracts from '../segments/TokenContracts'\nimport EventsContainer from '../segments/EventsContainer'\nimport NetworkWarningController from '../web3/NetworkWarningController'\n\nclass LayoutContainer extends Component {\n    render() {\n        const NoMatch = ({ location }) => (\n            <div>\n                <h3>No match for <code>{location.pathname}</code></h3>\n            </div>\n        )\n\n        return (\n            <Grid padded={'vertically'}>\n                <NetworkWarningController/>\n                <Grid.Row>\n                    <Grid.Column width={4} /*style={{ backgroundColor: 'rgb(27, 28, 29)' }}*/>\n                        <Sidebar/>\n                    </Grid.Column>\n                    <Grid.Column width={12}>\n                        <Switch>\n                            <Route exact path='/' component={OverviewContainer}/>\n                            <Route exact path='/overview/' component={OverviewContainer}/>\n                            <Route path='/accounts/' component={Accounts}/>\n                            <Route path='/events/:tokenId/:address' component={EventsContainer}/>\n                            <Route path='/events/:tokenId/' component={EventsContainer}/>\n                            <Route path='/events/' component={EventsContainer}/>\n                            <Route path='/tokenContracts/' component={TokenContracts}/>\n\n                            <Route component={NoMatch} />\n                        </Switch>\n                    </Grid.Column>\n                </Grid.Row>\n                <Grid.Row>\n                    <Grid.Column width={16}>\n                        <Web3Container/>\n                    </Grid.Column>\n                </Grid.Row>\n            </Grid>\n        )\n    }\n}\n\nexport default LayoutContainer\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Header, Icon, Modal} from 'semantic-ui-react'\n\nconst ModalLoader = (props) => {\n    const {content} = props\n    return (\n        <Modal open={true}>\n            <Header>\n                <Icon loading name={'spinner'}></Icon>\n                <Header.Content>\n                    {content}\n                </Header.Content>\n            </Header>\n        </Modal>\n    )\n}\n\nModalLoader.propTypes = {\n    content: PropTypes.string.isRequired\n}\n\nModalLoader.defaultProps = {\n    //myProp: <defaultValue>\n}\n\nexport default ModalLoader\n","import React, {Component, Children} from 'react'\nimport PropTypes from 'prop-types'\nimport {connect} from 'react-redux'\nimport {loadTokenList, TOKEN_LIST_STATES} from './tokenActions'\nimport ModalLoader from '../common/ModalLoader'\n\nclass TokenLoaderGate extends Component {\n    constructor(props, context) {\n        super(props, context)\n        this.tokenListUrl = \"/tokens_1.json\"\n    }\n\n    componentDidMount() {\n        if (this.props.listState === TOKEN_LIST_STATES.VIRGIN) {\n            this.loadTokenList(this.props)\n        }\n    }\n\n    componentWillReceiveProps(newProps) {\n        if (newProps.listState === TOKEN_LIST_STATES.VIRGIN) {\n            this.loadTokenList(newProps)\n        }\n    }\n\n    loadTokenList(props) {\n        if (props.networkId >=1 ) {\n            const url = \"/tokens_\" + props.networkId + \".json\"\n            props.loadTokenList(url)\n        }\n    }\n\n    render() {\n        if (this.props.listState === TOKEN_LIST_STATES.INITIALIZED)\n        {\n            // Load the dapp.\n            return Children.only(this.props.children)\n        }\n\n        return(\n            // Display a loading indicator.\n            <ModalLoader content={\"Loading token contracts\"}/>\n        )\n    }}\n\nTokenLoaderGate.propTypes = {\n    listState: PropTypes.string\n}\n\nconst mapStateToProps = (state) => ({\n    listState: state.tokens.listState.listState,\n    networkId: state.web3Instance.id,\n})\n\nconst mapDispatchToProps = dispatch => ({\n    loadTokenList: (url) => {\n        dispatch(loadTokenList(url))\n    },\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TokenLoaderGate)\n","import React, {Children} from 'react'\nimport PropTypes from 'prop-types'\nimport {WEB3_STATES} from './web3Actions'\nimport ModalLoader from '../common/ModalLoader'\nimport {Button, Icon, Modal} from 'semantic-ui-react'\n\nconst Web3Gate = (props) => {\n    const {state, onRetry, children} = props\n\n    switch (state) {\n        case WEB3_STATES.INITIALIZED: {\n            // Gateway passed, render actual content.\n            return Children.only(children)\n        }\n        case WEB3_STATES.ERROR:\n            return (\n                <Modal open={true}>\n                    <Modal.Header>\n                        <Icon name='exclamation'/> No web3 found\n                    </Modal.Header>\n                    <Modal.Content>\n                        <p>Failed to initialize web3. Please enable web3 in your browser, e.g by using the Metamask extension.</p>\n                        <p><Button onClick={onRetry}>Retry</Button></p>\n                    </Modal.Content>\n                </Modal>\n\n            )\n        case WEB3_STATES.LOADING:\n        default: {\n            return (\n                <ModalLoader content={'Waiting on web3 initialization'}/>\n            )\n        }\n    }\n}\n\nWeb3Gate.propTypes = {\n    state: PropTypes.string.isRequired,\n    onRetry: PropTypes.func.isRequired,\n    children: PropTypes.object.isRequired,\n}\n\nexport default Web3Gate\n","import React, {Component} from 'react'\nimport {initialize, stopBlockFilter} from './web3Actions'\nimport {connect} from 'react-redux'\nimport Web3Gate from './web3Gate'\n\nclass Web3GateContainer extends Component {\n\n    componentDidMount() {\n        this.props.initialize()\n    }\n\n    componentWillUnmount() {\n        // Stop listening to new block events\n        this.props.stopBlockFilter()\n    }\n\n    onRetry = () => {\n        this.props.initialize()\n    }\n\n    render() {\n        const {state, children} = this.props\n        return <Web3Gate state={state} onRetry={this.onRetry} children={children}/>\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    state: state.web3Instance.state,\n})\n\nconst mapDispatchToProps = dispatch => ({\n    initialize: () => {\n        dispatch(initialize())\n    },\n    stopBlockFilter: () => {\n        dispatch(stopBlockFilter())\n    }\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Web3GateContainer)\n","import {Component, Children} from 'react'\nimport {connect} from 'react-redux'\nimport {getLocalData, SELECTED_TOKEN_KEY, TRACKED_TOKEN_KEYS, WATCHED_ADDRESSES} from \"./localStorageWrapper\"\nimport {changeSelectorTokenId, changeTokenTracking, loadMultiTokenBalances} from \"../modules/token/tokenActions\"\nimport {addAddress, ADDRESS_TYPE_EXTERNAL} from \"../modules/address/addressActions\"\n\nclass LocalStorageGate extends Component {\n\n    componentDidMount() {\n        // Get tracked tokens from localstorage\n        const trackedTokens = getLocalData(TRACKED_TOKEN_KEYS, []);\n        trackedTokens.forEach((tokenId) => {\n            this.props.changeTokenTracking(tokenId)\n        })\n        // get selected token from localstorage\n        const selectedTokendId = getLocalData(SELECTED_TOKEN_KEY, null)\n        if (selectedTokendId) {\n            this.props.changeSelectorTokenId(selectedTokendId)\n        }\n        // Get addresses from localstorage\n        const watchedAddresses = getLocalData(WATCHED_ADDRESSES, [])\n        watchedAddresses.forEach((addressEntry) => {\n            this.props.addAddress(addressEntry.address, addressEntry.ensName)\n            // load balance for all tracked tokens\n            this.props.loadMultiTokenBalances(trackedTokens, addressEntry.address)\n        })\n    }\n\n    render() {\n        // Load the dapp.\n        return Children.only(this.props.children)\n    }\n}\n\nconst mapStateToProps = (state) => ({\n})\n\nconst mapDispatchToProps = dispatch => ({\n    changeTokenTracking: (tokenId) => {\n        dispatch(changeTokenTracking(tokenId, true))\n    },\n    changeSelectorTokenId: (tokenId) => {\n        dispatch(changeSelectorTokenId(tokenId))\n    },\n    addAddress: (address, ensName) => {\n        dispatch(addAddress(address, ensName, ADDRESS_TYPE_EXTERNAL))\n    },\n    loadMultiTokenBalances: (trackedTokens, address) => {\n        dispatch(loadMultiTokenBalances(trackedTokens, address))\n    }\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LocalStorageGate)\n","import React, {Component} from 'react'\nimport {Provider} from 'react-redux'\nimport { BrowserRouter } from 'react-router-dom'\nimport configureStore from './store'\nimport {Container} from 'semantic-ui-react'\nimport ModalRoot from './modules/modal/ModalRoot'\nimport LayoutContainer from './modules/layout/LayoutContainer'\nimport TokenLoaderGate from './modules/token/TokenLoaderGate'\nimport Web3GateContainer from './modules/web3/web3GateContainer'\nimport LocalStorageGate from \"./utils/LocalStorageGate\"\n\nlet {store} = configureStore()\n\nclass App extends Component {\n    render() {\n        return (\n            <Provider store={store}>\n                <Web3GateContainer>\n                    <TokenLoaderGate>\n                        <LocalStorageGate>\n                            <BrowserRouter>\n                                <Container>\n                                    <ModalRoot/>\n                                    <LayoutContainer/>\n                                </Container>\n                            </BrowserRouter>\n                        </LocalStorageGate>\n                    </TokenLoaderGate>\n                </Web3GateContainer>\n            </Provider>\n        )\n    }\n}\n\nexport default App\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nregisterServiceWorker();\n"],"sourceRoot":""}